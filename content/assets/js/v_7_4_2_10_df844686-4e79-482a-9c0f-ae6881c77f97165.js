import{j as e,m as Ve,ba as Pt,d as It,bn as Tt,bo as zt,bp as Dt,bq as Lt,br as Et,at as lt,r as ot,a8 as _,b as ct,bs as Mt,bt as $t,bu as Rt,bv as Ot,bw as Gt,bx as Bt,by as Vt,bz as qt,bA as Ut,bB as Ht,bC as Wt,bD as Kt,bE as qe,bF as Yt,bG as Jt,bH as Xt,bI as Ue,bJ as He,bK as Zt,bL as Qt,bM as ea,bN as ta,bO as aa,bP as sa,bQ as na,bR as ra,bS as ia,bT as Ee,a0 as We,P as we,bU as dt,bV as la,bW as G,bX as mt,bY as Me,bZ as oa,b_ as Ae,b$ as oe,c0 as ca,c1 as Fe,c2 as xt,c3 as W,a9 as ze,c4 as da,V as ut,a2 as Ke,I as z,c5 as Ye,c6 as ma,c7 as xa,c8 as ua,c9 as pa,ca as ga,cb as ba,cc as ha,cd as fa,ce as va,f as ja,a as _a,bc as ya,cf as Na,cg as Ca,c as wa,e as Sa,ch as _e,ci as pt,cj as gt,ck as je,cl as ka,cm as Pe,cn as he,co as Aa,cp as Fa,h as Pa,b6 as Ia}from"./v_7_4_2_10_df844686-4e79-482a-9c0f-ae6881c77f9710.js";import{a as C,R as Y}from"./v_7_4_2_10_df844686-4e79-482a-9c0f-ae6881c77f974.js";import{b as Je,u as h}from"./v_7_4_2_10_df844686-4e79-482a-9c0f-ae6881c77f9719.js";import{c as I}from"./v_7_4_2_10_df844686-4e79-482a-9c0f-ae6881c77f977.js";import{i as j,j as S,k as De,o as Ta,p as D,q as B,u as za,E as Da,h as bt,r as ht,t as La}from"./v_7_4_2_10_df844686-4e79-482a-9c0f-ae6881c77f9721.js";import{C as xe,o as E,p as L,u as $e,b as Re,n as ft,q as vt,ay as Ea,F as Ie}from"./v_7_4_2_10_df844686-4e79-482a-9c0f-ae6881c77f9723.js";import{E as Ma,u as te}from"./v_7_4_2_10_df844686-4e79-482a-9c0f-ae6881c77f9746.js";import{d as $a}from"./v_7_4_2_10_df844686-4e79-482a-9c0f-ae6881c77f97108.js";import{A as Ra}from"./v_7_4_2_10_df844686-4e79-482a-9c0f-ae6881c77f97194.js";import{A as Oa}from"./v_7_4_2_10_df844686-4e79-482a-9c0f-ae6881c77f97198.js";import{R as Ga}from"./v_7_4_2_10_df844686-4e79-482a-9c0f-ae6881c77f9790.js";import{W as k}from"./v_7_4_2_10_df844686-4e79-482a-9c0f-ae6881c77f9718.js";import{E as Ba,I as jt}from"./v_7_4_2_10_df844686-4e79-482a-9c0f-ae6881c77f97199.js";import{u as Oe}from"./v_7_4_2_10_df844686-4e79-482a-9c0f-ae6881c77f975.js";import{P as Va}from"./v_7_4_2_10_df844686-4e79-482a-9c0f-ae6881c77f97169.js";import{j as _t,X as yt,T as qa,L as Xe,R as Ua,k as Ha,l as Ze,m as Wa,n as Ka,U as Ya,o as Ja,E as Xa,p as Qe}from"./v_7_4_2_10_df844686-4e79-482a-9c0f-ae6881c77f978.js";import{u as Za}from"./v_7_4_2_10_df844686-4e79-482a-9c0f-ae6881c77f9763.js";import{u as Qa}from"./v_7_4_2_10_df844686-4e79-482a-9c0f-ae6881c77f9793.js";import{a as es}from"./v_7_4_2_10_df844686-4e79-482a-9c0f-ae6881c77f9791.js";import"./v_7_4_2_10_df844686-4e79-482a-9c0f-ae6881c77f97.js";import"./v_7_4_2_10_df844686-4e79-482a-9c0f-ae6881c77f979.js";import"./v_7_4_2_10_df844686-4e79-482a-9c0f-ae6881c77f9747.js";import"./v_7_4_2_10_df844686-4e79-482a-9c0f-ae6881c77f976.js";import"./v_7_4_2_10_df844686-4e79-482a-9c0f-ae6881c77f972.js";import"./v_7_4_2_10_df844686-4e79-482a-9c0f-ae6881c77f973.js";import"./v_7_4_2_10_df844686-4e79-482a-9c0f-ae6881c77f97105.js";import"./v_7_4_2_10_df844686-4e79-482a-9c0f-ae6881c77f97125.js";import"./v_7_4_2_10_df844686-4e79-482a-9c0f-ae6881c77f9728.js";import"./v_7_4_2_10_df844686-4e79-482a-9c0f-ae6881c77f9741.js";import"./v_7_4_2_10_df844686-4e79-482a-9c0f-ae6881c77f9738.js";import"./v_7_4_2_10_df844686-4e79-482a-9c0f-ae6881c77f9760.js";import"./v_7_4_2_10_df844686-4e79-482a-9c0f-ae6881c77f97106.js";import"./v_7_4_2_10_df844686-4e79-482a-9c0f-ae6881c77f97107.js";import"./v_7_4_2_10_df844686-4e79-482a-9c0f-ae6881c77f9727.js";import"./v_7_4_2_10_df844686-4e79-482a-9c0f-ae6881c77f9737.js";import"./v_7_4_2_10_df844686-4e79-482a-9c0f-ae6881c77f9736.js";import"./v_7_4_2_10_df844686-4e79-482a-9c0f-ae6881c77f97156.js";var Nt=function(t){var a=C.useRef(null),s=function(n){n.preventDefault();var r=a.current;if(r){n.clientX;var i=n.clientY;r.scrollLeft;var l=r.scrollTop,d=function(m){r.scrollTop=l-(m.clientY-i)},p=function(){document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",p),r.style.cursor="grab"};r.style.cursor="grabbing",document.addEventListener("mousemove",d),document.addEventListener("mouseup",p)}};return{ref:a,onMouseDown:s}};const ae=I((t,a)=>({activePage:"campaigns",setActivePage:s=>{a().activePage!==s&&t({activePage:s})}})),ye=I()(xe(t=>({isHidden:!1,toggleHeader:()=>t(a=>({isHidden:!a.isHidden}))}),{name:"useHeaderController-store",version:1,partialize:t=>({isHidden:t.isHidden})})),ts=({type:t,icon:a,label:s,title:n,onClick:r})=>{const l=ae(c=>c.activePage)===t,d=j(c=>c.campaigns.find(x=>x.id===c.currentCampaignId)),p=(d==null?void 0:d.status)===S.SENDING,m={exitToPanel:"#ef4444",exitToWhats:"#22c55e"};return e.jsxs(Ve.button,{type:"button",onClick:r,"aria-label":s,title:n||s,className:`w-4/5 p-2 relative rounded-md cursor-pointer place-items-center ${l?"bg-[var(--filter-btn-active-bg)] text-[var(--filter-btn-active-text)]":"bg-[var(--filter-btn-inactive-bg)] hover:bg-[var(--sidebar-line-color)] border border-[var(--filter-btn-inactive-border-color)]"}`,whileHover:{scale:1.05,boxShadow:"0px 5px 10px rgba(0, 0, 0, 0.1)"},whileTap:{scale:.95},transition:{type:"spring",stiffness:400,damping:17},children:[e.jsx(Ve.div,{whileHover:{rotate:2},transition:{type:"spring",stiffness:400,damping:20},children:e.jsx(a,{color:m[t]??void 0,className:"2xl:text-2.5xl text-lg"})}),p&&t==="sendFastCampaign"&&e.jsx("div",{className:"absolute top-0.5 right-0.5 pointer-events-none",children:e.jsx(Pt,{tipo:"ativado",size:2})})]})},Le=({width:t="100%",borderColor:a="var(--sidebar-line-color)",borderWidth:s="1.5px",margin:n="0"})=>e.jsx("hr",{style:{width:t,borderColor:a,borderWidth:s,borderStyle:"solid",margin:n}}),as=()=>{const t=Je(m=>m.theme),{setTheme:a}=Je.getState(),{setActivePage:s}=ae.getState(),n=ye(m=>m.isHidden),r=h(m=>m.language),i=m=>{switch(m){case"sendFastCampaign":s("sendFastCampaign");break;case"campaigns":s("campaigns");break;case"toggleHiddenHeader":ye.getState().toggleHeader();break;case"themeToggle":a(!t);break;case"exitToPanel":De.getState().open(e.jsx(Ma,{}));break;case"exitToWhats":De.getState().close();break;default:console.warn("Ação não implementada:",m)}},l=[{type:"sendFastCampaign",icon:It,label:r.sidebar_enviar_campanha,title:r.sidebar_enviar_campanha,onClick:()=>i("sendFastCampaign")},{type:"campaigns",icon:Tt,label:r.sidebar_gerenciar_campanhas,title:r.sidebar_gerenciar_campanhas,onClick:()=>i("campaigns")}],d=[{type:"toggleHiddenHeader",icon:n?zt:Dt,label:n?r.sidebar_mostrar_cabecalho:r.sidebar_ocultar_cabecalho,title:n?r.sidebar_mostrar_cabecalho:r.sidebar_ocultar_cabecalho,onClick:()=>i("toggleHiddenHeader")},{type:"themeToggle",icon:t?Lt:Et,label:r.sidebar_alternar_tema,title:r.sidebar_alternar_tema_desc,onClick:()=>i("themeToggle")},{type:"exitToWhats",icon:lt,label:r.sidebar_voltar_whats,title:r.sidebar_voltar_whats,onClick:()=>i("exitToWhats")},{type:"exitToPanel",icon:$a,label:r.sidebar_voltar_painel,title:r.sidebar_voltar_painel,onClick:()=>i("exitToPanel")}],p=m=>m.map(c=>e.jsx(ts,{...c},c.type));return e.jsxs("aside",{className:"bg-[var(--sidebar-bg-primary)] flex flex-col items-center justify-between w-12 2xl:w-16 py-1",children:[e.jsxs("div",{className:"w-full flex flex-col items-center gap-1",children:[e.jsx("img",{src:chrome.runtime.getURL("label/icons/icon.png"),className:"object-cover w-4/5 h-auto rounded-full",alt:"Logo"}),e.jsx(Le,{}),p(l)]}),e.jsxs("div",{className:"w-full flex flex-col items-center gap-1",children:[e.jsx(Le,{}),p(d)]})]})};function Ct({name:t}){return{newCampaign:{id:ot(),name:t,selectedContacts:[],actions:[],status:S.DRAFT,config:Ta,createdAt:new Date,updatedAt:new Date}}}const ss=()=>{const t=h(l=>l.language),{addCampaign:a,setCurrentCampaignId:s}=j.getState(),n=j(l=>l.campaigns),r=j(l=>l.currentCampaignId),i=n.find(l=>l.id===r);return C.useEffect(()=>{if(!r||!i){const l=new Date().toLocaleString(void 0,{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),{newCampaign:d}=Ct({name:`${t.ensure_campanha} ${l}`});a(d),s(d.id)}},[r,n,a,s,i]),i},ns=()=>{var m;const t=D(c=>c.steps),a=D(c=>c.currentStep),s=t.findIndex(({key:c})=>c===a),n=j(c=>c.currentCampaignId),i=((m=j(c=>c.campaigns).find(c=>c.id===n))==null?void 0:m.name)||"Nome Desconhecido",{breakpoint:l}=B(),d={width:l==="2xl"?"36px":"24px",margin:l==="2xl"?"0 12px":"0 8px"},p=ye(c=>c.isHidden);return e.jsxs("header",{children:[!p&&e.jsx("div",{className:"flex items-center justify-center py-2 2xl:py-3",children:t.map(({key:c,icon:x,label:b},g)=>{const o=g<=s;return e.jsxs("div",{className:"flex items-center",children:[g!==0&&e.jsx(Le,{width:d.width,margin:d.margin,borderColor:o?"var(--primaria)":"var(--sidebar-line-color)"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:_("size-7 2xl:size-9 rounded-full flex items-center justify-center",o?"bg-[var(--primaria)]":"bg-[var(--step-bg-inactive)]"),children:e.jsx(x,{className:_(o?"text-white":"text-[var(--step-icon-color)]","size-4 2xl:size-5")})}),e.jsx("span",{className:_("absolute left-1/2 -translate-x-1/2 top-full text-xs 2xl:text-sm font-semibold whitespace-nowrap",o?"text-[var(--primaria)]":"text-[var(--step-label-color)]"),children:b})]})]},c)})}),e.jsx("div",{className:"mt-2",children:e.jsx("div",{className:"divider before:bg-[var(--sidebar-line-color)] after:bg-[var(--sidebar-line-color)]",children:e.jsx("span",{className:"badge badge-soft bg-[var(--primaria)] text-white !text-xs 2xl:!text-sm font-semibold",children:i})})})]})},Se=({title:t,subtitle:a})=>e.jsxs("div",{className:"mb-2 2xl:mb-4",children:[e.jsx("h1",{className:"text-lg 2xl:text-2xl font-medium leading-none text-[var(--primary-strong)]",children:t}),a&&e.jsx("p",{className:"text-sm 2xl:text-lg text-[var(--light-text-color)]",children:a})]}),rs=()=>{const t=j(n=>n.campaigns.find(r=>r.id===n.currentCampaignId)),s=((t==null?void 0:t.actions)||[]).length===0?"col-span-2":"";return e.jsx("div",{className:_(s,"max-h-[55dvh] overflow-y-auto transition-all duration-200","bg-[var(--eem-bg-secondary)] p-2 rounded-md h-fit"),children:e.jsx(Ra,{acaoModel:"useAcaoEnvioEmMassaNew",placement:"left"})})},P=I(t=>({contacts:[],setContacts:a=>t({contacts:a}),loading:!0,setLoading:a=>t({loading:a})})),is=()=>{const t=()=>_("text-xs 2xl:text-base font-medium w-full text-left h-7 2xl:h-10 rounded-md transition-transform duration-200 mb-1 last:mb-0","border border-solid flex items-center justify-between px-1.5 leading-tight transform-gpu will-change-transform motion-reduce:transform-none","!border-[var(--filter-btn-inactive-border-color)] !bg-[var(--filter-btn-inactive-bg)] hover:!scale-[0.98]","hover:!bg-[var(--filter-btn-inactive-bg)] active:!bg-[var(--filter-btn-inactive-bg)] active:!text-[var(--primary-strong)]"),a={containerClassName:_("!w-full !p-0.5"),itemClassName:t()};return e.jsx("div",{children:e.jsx(Oa,{acaoModel:"useAcaoEnvioEmMassaNew",style:a})})},ls=()=>{const{breakpoint:t}=B(),a=t==="2xl"?"560":"418";return e.jsx("div",{className:"relative",children:e.jsx(Ga,{listSize:a})})},os=()=>{const t=P(l=>l.loading),a=h(l=>l.language),[s,n]=C.useState("actions"),r=l=>{t||s===l||n(l)},i=l=>_("text-xs 2xl:text-sm truncate flex items-center justify-center gap-1 flex-1 h-7 2xl:h-10 px-2 rounded-md transition-all duration-200 font-medium leading-none transform-gpu will-change-transform motion-reduce:transform-none",!t&&"hover:scale-[0.98] active:scale-[0.96] active:opacity-80",t&&"opacity-50 cursor-not-allowed",l?"bg-[var(--filter-btn-active-bg)] text-[var(--filter-btn-active-text)] shadow-sm":"text-[var(--primary-strong)] bg-[var(--view-btn-inactive-bg)]");return e.jsxs("div",{className:"flex flex-col gap-1 bg-[var(--eem-bg-secondary)] p-2 rounded-md h-fit",children:[e.jsxs("div",{className:"w-full flex items-center rounded-md gap-1",children:[e.jsxs("button",{type:"button","aria-pressed":s==="actions",className:i(s==="actions"),onClick:t?void 0:()=>r("actions"),disabled:t,children:[e.jsx(ct,{className:"text-inherit"}),e.jsx("span",{className:"font-bold",children:a.switch_acoes})]}),e.jsxs("button",{type:"button","aria-pressed":s==="fastResponse",className:i(s==="fastResponse"),onClick:t?void 0:()=>r("fastResponse"),disabled:t,children:[e.jsx(Mt,{className:"text-inherit"}),e.jsx("span",{className:"font-bold",children:a.switch_respostas_rapidas})]})]}),s==="actions"?e.jsx(is,{}):e.jsx(ls,{})]})},N=17,cs={txt:e.jsx(ia,{size:N}),image:e.jsx(ra,{size:N}),video:e.jsx(na,{size:N}),audio:e.jsx(sa,{size:N}),doc:e.jsx(aa,{size:N}),sticker:e.jsx(ta,{size:N}),respostaRapida:e.jsx(ea,{size:N}),addCRM:e.jsx(Qt,{size:N}),removeCRM:e.jsx(Zt,{size:N}),removeAllCRM:e.jsx(Ue,{size:N}),addLabel:e.jsx(He,{size:N}),removeLabel:e.jsx(He,{size:N}),removeAllLabel:e.jsx(Ue,{size:N}),timer:e.jsx(Xt,{size:N}),composing:e.jsx(Jt,{size:N}),recording:e.jsx(Yt,{size:N}),arquivar:e.jsx(qe,{size:N}),desarquivar:e.jsx(qe,{size:N}),fixarChat:e.jsx(Kt,{size:N}),desfixarChat:e.jsx(Wt,{size:N}),marcarNaoLido:e.jsx(Ht,{size:N}),transferir:e.jsx(Ut,{size:N}),bloquear:e.jsx(qt,{size:N}),pix:e.jsx(Vt,{size:N}),groupInvite:e.jsx(Bt,{size:N}),contact:e.jsx(Gt,{size:N}),linkPreview:e.jsx(Ot,{size:N}),list:e.jsx(Rt,{size:N})},ds=t=>cs[t]??e.jsx($t,{size:N}),ne=({action:t})=>e.jsx("div",{className:"w-5 h-5 flex-shrink-0 rounded-md flex items-center justify-center",children:e.jsx("span",{className:"inline-flex items-center justify-center",children:ds(t.type)})}),ms=({action:t,index:a})=>{const s=h(c=>c.language),n="p-1 2xl:p-1.5 rounded-md bg-[color-mix(in_srgb,var(--primaria)_30%,white)] shadow-md text-black font-semibold flex items-center gap-2",r="flex items-center justify-center size-4 2xl:size-5 rounded-full bg-[var(--primaria)] text-black text-xs flex-shrink-0",i="flex-1 flex items-center gap-2 min-w-0",l="truncate text-xs 2xl:text-sm",d="p-1 2xl:p-1.5 rounded-md bg-gray-100 shadow-md text-gray-500 font-normal flex items-center gap-2 border-2 border-dashed border-gray-300",p=c=>e.jsxs("div",{className:d,children:[e.jsx("div",{className:"flex items-center justify-center size-5 2xl:size-6 rounded-full !bg-gray-400 !text-white text-xs 2xl:text-sm flex-shrink-0",children:a+1}),e.jsx("div",{className:i,children:e.jsx("span",{className:_("text-gray-500 italic",l),children:c})})]}),m=c=>{var x,b,g;switch(c.type){case"txt":{const{mensagem:o}=c.propriedades;return o!=null&&o.trim()?e.jsxs("div",{className:n,children:[e.jsx("div",{className:r,children:a+1}),e.jsxs("div",{className:i,children:[e.jsx(ne,{action:c}),e.jsx("span",{className:l,children:o})]})]}):p(s.action_item_mensagem_vazia)}case"image":{const{base64:o,mensagem:u}=c.propriedades;return o?e.jsxs("div",{className:n,children:[e.jsx("div",{className:r,children:a+1}),e.jsxs("div",{className:i,children:[e.jsx("div",{className:"2xl:size-8 size-7 flex-shrink-0 overflow-hidden rounded-md",children:e.jsx("img",{src:o,alt:u??"imagem",className:"w-full h-full object-cover"})}),u&&e.jsx("span",{className:l,children:u})]})]}):p(s.action_item_imagem_nao_encontrada)}case"video":{const{base64:o,mensagem:u}=c.propriedades;return o?e.jsxs("div",{className:n,children:[e.jsx("div",{className:r,children:a+1}),e.jsxs("div",{className:i,children:[e.jsx("div",{className:"2xl:size-8 size-7 flex-shrink-0 overflow-hidden rounded-md",children:e.jsx("video",{src:o,className:"w-full h-full object-cover"})}),u&&e.jsx("span",{className:l,children:u})]})]}):p(s.action_item_video_nao_encontrado)}case"audio":{const{base64:o}=c.propriedades;return o?e.jsxs("div",{className:n,children:[e.jsx("div",{className:r,children:a+1}),e.jsxs("div",{className:i,children:[e.jsx(ne,{action:c}),e.jsx("div",{className:"w-full max-w-xs min-w-0",children:e.jsx("audio",{controls:!0,src:o,className:"w-full h-4"})})]})]}):p(s.action_item_audio_nao_encontrado)}case"doc":{const{base64:o,base64Name:u}=c.propriedades;return!o||!u?p(s.action_item_documento_nao_encontrado):e.jsxs("div",{className:n,children:[e.jsx("div",{className:r,children:a+1}),e.jsxs("div",{className:i,children:[e.jsx(ne,{action:c}),e.jsx("span",{className:l,children:u})]})]})}case"sticker":{const{base64:o}=c.propriedades;return o?e.jsxs("div",{className:n,children:[e.jsx("div",{className:r,children:a+1}),e.jsxs("div",{className:i,children:[e.jsx("div",{className:"2xl:size-8 size-7 flex-shrink-0 overflow-hidden rounded-md",children:e.jsx("img",{src:o,alt:"sticker",className:"w-full h-full object-cover"})}),e.jsx("div",{className:l,children:s.action_item_criar_sticker})]})]}):p(s.action_item_sticker_nao_encontrado)}case"respostaRapida":{const{respostaRapidaID:o}=c.propriedades;return o!=null&&o.trim()?e.jsxs("div",{className:n,children:[e.jsx("div",{className:r,children:a+1}),e.jsxs("div",{className:i,children:[e.jsx(ne,{action:c}),e.jsx("span",{className:l,children:s.action_item_resposta_rapida})]})]}):p(s.action_item_resposta_rapida_nao_selecionada)}case"addCRM":case"removeCRM":case"removeAllCRM":case"addLabel":case"removeLabel":case"removeAllLabel":case"timer":case"composing":case"recording":case"arquivar":case"desarquivar":case"fixarChat":case"desfixarChat":case"marcarNaoLido":case"bloquear":case"groupInvite":case"contact":case"linkPreview":case"transferir":case"pix":{const o=c.propriedades;let u="";switch(c.type){case"addCRM":u=`${s.action_item_adicionar_crm}${o.crmID?`: ${o.crmID}`:""}${o.abaID?` (${s.action_item_aba}: ${o.abaID})`:""}`;break;case"removeCRM":u=`${s.action_item_remover_crm}${o.crmID?`: ${o.crmID}`:""}${o.abaID?` (${s.action_item_aba}: ${o.abaID})`:""}`;break;case"removeAllCRM":u=s.action_item_remover_todos_crms;break;case"addLabel":u=`${s.action_item_adicionar_etiqueta}: ${o.labelID||s.action_item_sem_id}`;break;case"removeLabel":u=`${s.action_item_remover_etiqueta}: ${o.labelID||s.action_item_sem_id}`;break;case"removeAllLabel":u=s.action_item_remover_todas_etiquetas;break;case"timer":u=o.segundos?`${s.action_item_aguardar_segundos} ${o.segundos} ${s.action_item_segundos}`:s.action_item_timer_sem_duracao;break;case"composing":u=o.segundos?`${s.action_item_digitando_por} ${o.segundos} ${s.action_item_segundos}`:s.action_item_tempo_digitacao_nao_definido;break;case"recording":u=o.segundos?`${s.action_item_gravando_por} ${o.segundos} ${s.action_item_segundos}`:s.action_item_tempo_gravacao_nao_definido;break;case"arquivar":u=s.action_item_arquivar_contato;break;case"desarquivar":u=s.action_item_desarquivar_contato;break;case"fixarChat":u=s.action_item_fixar_conversa;break;case"desfixarChat":u=s.action_item_desfixar_conversa;break;case"marcarNaoLido":u=s.action_item_marcar_nao_lido;break;case"bloquear":u=s.action_item_bloquear_contato;break;case"groupInvite":u=s.action_item_convite_grupo;break;case"contact":u=o.userName?`${o.userName} - ${o.userID??""}`:s.action_item_contato_sem_nome;break;case"linkPreview":u=o.title||o.link||s.action_item_link;break;case"transferir":if(!((x=o.email)!=null&&x.trim()))return p(s.action_item_email_transferencia_nao_definido);u=`${s.action_item_transferir_para}: ${o.email}${o.urgencia?` (${s.action_item_urgente})`:""}${o.mensagem?` - ${o.mensagem}`:""}`;break;case"pix":if(!((b=o.key)!=null&&b.trim())||!((g=o.name)!=null&&g.trim()))return p(s.action_item_dados_pix_incompletos);u=`${s.action_item_pix} (${o.keyType}): ${o.name} - ${o.key}`;break;default:u=`${c.type}`}return e.jsxs("div",{className:n,children:[e.jsx("div",{className:r,children:a+1}),e.jsxs("div",{className:i,children:[e.jsx(ne,{action:c}),e.jsx("span",{className:l,children:u})]})]})}default:return p(`${s.action_item_acao}: ${c.type}`)}};return e.jsx(e.Fragment,{children:m(t)})},xs="/assets/png/Whatsbg.chunk.png",us=()=>{const t=h(n=>n.language),a=j(n=>n.campaigns.find(r=>r.id===n.currentCampaignId)),s=(a==null?void 0:a.actions)||[];return e.jsxs("div",{style:{backgroundImage:`url(${chrome.runtime.getURL(`content/${xs}`)})`},className:"flex flex-col p-3 2xl:p-4 rounded-md overflow-hidden h-[43dvh] overflow-y-auto transition-all duration-200",children:[e.jsxs("div",{className:"flex items-center gap-1 2xl:gap-2 w-full text-[var(--primaria)] font-bold mb-3 2xl:mb-4",children:[e.jsx(Ee,{className:"2xl:text-2xl text-lg"}),e.jsx("h2",{className:"2xl:text-lg text-sm",children:t.preview_titulo})]}),e.jsx("div",{className:"flex-1 flex flex-col gap-1.5 2xl:gap-2 overflow-y-auto",children:s.map((n,r)=>e.jsx(ms,{action:n,index:r},n.id))})]})},ps=()=>{const t=h(x=>x.language),a=j(x=>x.campaigns.find(b=>b.id===x.currentCampaignId)),s=j(x=>x.updateConfig),n="range !range-xs w-full",r="font-medium label p-0";if(!a)return null;const i=x=>{s(a.id,{interval:{...a.config.interval,seconds:parseInt(x)}})},l=x=>{s(a.id,{pause:{...a.config.pause,every:parseInt(x)}})},d=x=>{s(a.id,{pause:{...a.config.pause,durationSeconds:parseInt(x)}})},p=x=>{const b=x.target.checked;s(a.id,{signature:{...a.config.signature,disabled:b,useCustomName:b?!1:a.config.signature.useCustomName,customName:b?void 0:a.config.signature.customName}})},m=x=>{const b=x.target.checked;s(a.id,{signature:{...a.config.signature,useCustomName:b,customName:b?a.config.signature.customName:void 0}})},c=x=>{s(a.id,{signature:{...a.config.signature,customName:x.trim()||void 0}})};return e.jsxs("div",{className:"w-full !text-xs 2xl:!text-sm",children:[e.jsxs("div",{title:t.campaign_settings_intervalo_tooltip,children:[e.jsxs("div",{className:"flex justify-between items-center mb-0.5",children:[e.jsx("label",{className:"font-medium",children:t.campaign_settings_intervalo}),e.jsxs("span",{className:"font-semibold",children:[a.config.interval.seconds," ",t.campaign_settings_segundos]})]}),e.jsx("input",{type:"range",min:1,max:60,value:a.config.interval.seconds,onChange:x=>i(x.target.value),className:n,style:{zoom:"75%"}})]}),e.jsxs("div",{title:t.campaign_settings_pausa_tooltip,children:[e.jsxs("div",{className:"flex justify-between items-center mb-0.5",children:[e.jsx("label",{className:"font-medium",children:t.campaign_settings_pausa_a_cada}),e.jsxs("span",{className:"font-semibold",children:[a.config.pause.every," ",t.campaign_settings_contatos]})]}),e.jsx("input",{type:"range",min:1,max:50,value:a.config.pause.every,onChange:x=>l(x.target.value),className:n,style:{zoom:"75%"}})]}),e.jsxs("div",{title:t.campaign_settings_tempo_pausa_tooltip,children:[e.jsxs("div",{className:"flex justify-between items-center mb-0.5",children:[e.jsx("label",{className:"font-medium",children:t.campaign_settings_tempo_pausa}),e.jsxs("span",{className:"font-semibold",children:[a.config.pause.durationSeconds," ",t.campaign_settings_segundos]})]}),e.jsx("input",{type:"range",min:5,max:300,value:a.config.pause.durationSeconds,onChange:x=>d(x.target.value),className:n,style:{zoom:"75%"}})]}),e.jsx("div",{className:"mb-1",title:t.campaign_settings_desativar_tooltip,children:e.jsxs("label",{className:r,children:[t.campaign_settings_desativar_assinatura,e.jsx(We,{id:"disable-signature",estado:a.config.signature.disabled,switchUpdate:p,zoom:{zoom:"60%"}})]})}),!a.config.signature.disabled&&e.jsx("div",{className:"mb-1",title:t.campaign_settings_personalizar_tooltip,children:e.jsxs("label",{className:r,children:[t.campaign_settings_personalizar_nome,e.jsx(We,{id:"custom-signature-name",estado:a.config.signature.useCustomName,switchUpdate:m,zoom:{zoom:"60%"}})]})}),a.config.signature.useCustomName&&!a.config.signature.disabled&&e.jsx("div",{title:t.campaign_settings_nome_tooltip,children:e.jsxs("fieldset",{className:"fieldset",children:[e.jsx("legend",{className:"fieldset-legend",children:t.campaign_settings_nome_assinatura}),e.jsx("input",{type:"text",className:`input 2xl:input-sm input-xs input-bordered w-full
                           2xl:placeholder:!text-sm placeholder:!text-xs`,placeholder:t.campaign_settings_digite_nome,value:a.config.signature.customName||"",onChange:x=>c(x.target.value)})]})})]})},gs=()=>{const t=h(n=>n.language),a=j(n=>n.campaigns.find(r=>r.id===n.currentCampaignId)),s=(a==null?void 0:a.actions)||[];return e.jsxs(e.Fragment,{children:[e.jsx(Se,{title:t.step_actions_titulo,subtitle:t.step_actions_subtitulo}),e.jsxs("div",{className:"grid grid-cols-[30%_minmax(300px,1fr)_23%] gap-2 2xl:gap-4",children:[e.jsx(os,{}),e.jsx(rs,{}),s.length>0&&e.jsxs("div",{className:"flex flex-col gap-2 bg-[var(--eem-bg-secondary)] p-2 rounded-md h-fit",children:[e.jsx(us,{}),e.jsx(ps,{})]})]})]})},J=I((t,a)=>({activeFilter:{type:"filter",id:"savedContacts"},setActiveFilter:s=>{t({activeFilter:{type:"filter",id:s}})},setActiveGroupment:s=>{t({activeFilter:{type:"groupment",id:s}})}})),Ne=I()(xe(t=>({groupments:[],addGroupment:a=>t(s=>({groupments:[...s.groupments,a]})),removeGroupment:a=>t(s=>({groupments:s.groupments.filter(n=>n.id!==a)}))}),{name:"useGroupments-store",version:1,partialize:t=>({groupments:t.groupments})}));function bs(t){const a=h.getState().language,s=we(t);return s.endsWith("@c.us")?a.user_type_contato:s.endsWith("@g.us")?a.user_type_grupo:s.endsWith("lid")?a.user_type_contato:a.user_type_desconhecido}function hs(t){var a;return(a=t.id)==null?void 0:a.startsWith("1313555")}async function fs(t){if(t.name)return t.name;try{const a=await k.Contact("get",we(t.id));return(a==null?void 0:a.name)||(a==null?void 0:a.pushname)||t.id}catch(a){return console.warn(`Erro ao buscar contato ${t.id}:`,a),t.id}}function vs(t){var n;const a=[t["First Name"],t["Middle Name"],t["Last Name"]].map(r=>r==null?void 0:r.trim()).filter(Boolean).join(" ");if(a)return a;const s=["Nickname","Organization Name"].map(r=>{var i;return(i=t[r])==null?void 0:i.trim()}).find(Boolean);return s||((n=t.name)!=null&&n.trim()?t.name.trim():"")}const js=t=>t.map(s=>({id:s.id||s["Phone 1 - Value"],name:vs(s)})),ke=I()(xe(t=>({importedContacts:[],setImportedContacts:a=>{const s=js(a);t({importedContacts:s})}}),{name:"useImportedContactsStore-store",version:1,partialize:t=>({importedContacts:t.importedContacts})})),_s=()=>{const t=h(v=>v.language),[a,s]=C.useState("filters"),n=P(v=>v.loading),r=J(v=>v.activeFilter),{setActiveFilter:i,setActiveGroupment:l}=J.getState(),d=Ne(v=>v.groupments),p=Ne(v=>v.removeGroupment),m=ke.getState().setImportedContacts,c=j(v=>v.campaigns.find($=>$.id===v.currentCampaignId)),x=(c==null?void 0:c.selectedContacts)||[],b=E.getState().open,g=v=>{r.type==="filter"&&r.id===v||i(v)},o=()=>{b(e.jsx(jt,{list:v=>m(v)}))},u=v=>{r.type==="groupment"&&r.id===v||l(v)},y=v=>{n||a===v||s(v)},w=[{id:"savedContacts",type:"filter",label:t.cts_salvos,onClick:()=>g("savedContacts")},{id:"inbox",type:"filter",label:t.inbox,onClick:()=>g("inbox")},{id:"labels",type:"filter",label:t.etiquetas,onClick:()=>g("labels")},{id:"groups",type:"filter",label:t.grupos,onClick:()=>g("groups")},{id:"groupContacts",type:"filter",label:t.cts_grupos,onClick:()=>g("groupContacts")},{id:"crmOrTabs",type:"filter",label:`${t.crms} / ${t.abas}`,onClick:()=>g("crmOrTabs")},{id:"contactProfile",type:"filter",label:t.perfil_cts,onClick:()=>g("contactProfile")},{id:"importSpreadsheet",type:"filter",label:t.importar_planilha,onClick:()=>g("importSpreadsheet")}],f=d.map(v=>({id:v.id,type:"groupment",label:v.name,onClick:()=>u(v.id)})),A=a==="filters"?w:f,M=v=>_("text-xs 2xl:text-sm truncate flex items-center justify-center gap-1 flex-1 h-7 2xl:h-10 px-2 rounded-md transition-all duration-200 font-medium leading-none transform-gpu will-change-transform motion-reduce:transform-none",!n&&"hover:scale-[0.98] active:scale-[0.96] active:opacity-80",n&&"opacity-50 cursor-not-allowed",v?"bg-[var(--filter-btn-active-bg)] text-[var(--filter-btn-active-text)] shadow-sm":"text-[var(--primary-strong)] bg-[var(--view-btn-inactive-bg)]"),F=v=>_("text-xs 2xl:text-base font-medium w-full text-left h-7 2xl:h-10 rounded-md transition-transform duration-200 border border-solid flex items-center justify-between px-1.5 leading-tight transform-gpu will-change-transform motion-reduce:transform-none",v?"bg-[var(--filter-btn-active-bg)] text-[var(--filter-btn-active-text)]":"border-[var(--filter-btn-inactive-border-color)] bg-[var(--filter-btn-inactive-bg)] hover:scale-[0.98]",n&&!v&&"opacity-50 cursor-not-allowed hover:scale-100");return e.jsxs("div",{className:"flex flex-col items-start gap-1 bg-[var(--eem-bg-secondary)] p-2 rounded-md h-fit",children:[e.jsxs("div",{className:"w-full flex items-center rounded-md gap-1",children:[e.jsxs("button",{className:M(a==="filters"),onClick:n?void 0:()=>y("filters"),disabled:n,children:[e.jsx(dt,{className:"text-inherit"}),e.jsx("span",{className:"font-bold",children:t.filtros}),e.jsx("div",{className:"badge badge-xs 2xl:badge-sm badge-soft text-white bg-[var(--primaria)]",children:w.length})]}),e.jsxs("button",{className:M(a==="groups"),onClick:n?void 0:()=>y("groups"),disabled:n,children:[e.jsx(la,{className:"text-inherit"}),e.jsx("span",{className:"font-bold",children:t.agrupamentos}),e.jsx("div",{className:"badge badge-xs 2xl:badge-sm badge-soft text-white bg-[var(--primaria)]",children:f.length})]})]}),e.jsxs("div",{className:"flex flex-col gap-1 w-full max-h-[50dvh] overflow-y-auto p-[0.5px]",children:[A.map(v=>{const $=r.type===v.type&&r.id===v.id,pe=v.id==="importSpreadsheet",ge=v.type==="groupment";return e.jsxs("button",{className:F($),onClick:n&&!$?void 0:v.onClick,disabled:n&&!$,children:[e.jsx("span",{className:"truncate flex-1",children:v.label}),n&&$&&e.jsx(G,{className:"text-sm 2xl:text-base animate-spin"}),pe&&!n&&e.jsxs("button",{type:"button",title:t.importar_planilha_titulo,className:"rounded-md text-xs 2xl:text-base px-2 gap-1 transition-all active:scale-95 flex items-center justify-center border border-solid duration-200 hover:scale-[0.98]",onClick:()=>o(),children:[t.importar,e.jsx(mt,{})]}),ge&&!n&&e.jsx("button",{type:"button",title:t.remover_agrupamento,className:"2xl:size-6 size-5 rounded-md transition-all active:scale-95 text-red-500 flex items-center justify-center border border-solid duration-200 hover:scale-[0.98]",onClick:be=>{be.stopPropagation(),p(v.id)},children:e.jsx(Me,{className:"2xl:text-base text-sm"})})]},`${v.type}-${v.id}`)}),a==="groups"&&f.length===0&&e.jsxs("div",{className:"text-center text-xs 2xl:text-base py-2 2xl:py-4 px-1.5 2x:px-2 border border-dotted italic rounded-md",children:[t.nenhum_agrupamento_criado,e.jsx("br",{}),t.criar_agrupamentos_destinatarios]})]}),e.jsxs("button",{className:`mt-1 text-xs 2xl:text-base w-full truncate flex items-center justify-center gap-1 p-1.5 
        rounded-md transition-all duration-200 font-medium leading-none transform-gpu 
        motion-reduce:transform-none hover:scale-[0.98] active:scale-[0.96] will-change-transform 
        active:opacity-80 text-[var(--primary-strong)] bg-[var(--view-btn-inactive-bg)]`,onClick:()=>Ba(x),children:[e.jsx(oa,{}),e.jsx("span",{className:"font-medium",children:t.exportar_contatos_selecionados})]})]})},ue=({contact:t,className:a="",size:s="md"})=>{var g;const[n,r]=C.useState(!1),i=["bg-red-500","bg-blue-500","bg-green-500","bg-yellow-500","bg-purple-500","bg-pink-500","bg-orange-500","bg-indigo-500","bg-teal-500"],l={xs:"w-6 h-6 text-xs",sm:"w-8 h-8 text-xs",md:"w-10 h-10 text-sm",lg:"w-12 h-12 text-base"},d=t.id.charCodeAt(0)%i.length,p=i[d],m=`${l[s]} rounded-full ${a} border border-solid border-[var(--contact-img-border-color)]`;function c(o){const u=o.match(/[A-Za-zÀ-ÖØ-öø-ÿ]/);if(u)return u[0].toUpperCase();const y=o.match(/\d/);return y?y[0]:"?"}const x=(g=t.name)!=null&&g.trim()?t.name.trim():t.phone||t.id;return t.avatarUrl&&t.avatarUrl!=="undefined"&&t.avatarUrl.trim()&&!n?e.jsx("img",{src:t.avatarUrl,alt:t.name,className:`${m} object-cover`,onError:()=>r(!0)}):e.jsx("div",{className:`${m} flex items-center justify-center ${p}`,children:e.jsx("span",{className:"text-white font-semibold",children:c(x)})})},ys=({contact:t,virtualItem:a})=>{const s=h(b=>b.language),{breakpoint:n}=B(),r=j(b=>b.currentCampaignId),i=j(b=>b.campaigns),{updateCampaign:l}=j.getState(),d=i.find(b=>b.id===r),p=(d==null?void 0:d.selectedContacts.some(b=>b.id===t.id))||!1,m=bs(t.id),c=n==="2xl"?"md":"sm",x=()=>{if(!d)return;const b=p?d.selectedContacts.filter(g=>g.id!==t.id):[...d.selectedContacts,t];l(d.id,{selectedContacts:b})};return e.jsx("div",{className:"absolute top-0 left-0 w-full will-change-transform",style:{height:a.size,transform:`translateY(${a.start}px)`},children:e.jsxs("label",{htmlFor:`contact-checkbox-${t.id}`,className:`w-full h-full py-1 2xl:py-1.5 px-2 2xl:px-3 flex items-center gap-1 2xl:gap-2 
        bg-[var(--contact-card-bg)] rounded-md cursor-pointer
        transition-all duration-200 hover:scale-[1.01] hover:opacity-90
        active:scale-[0.98] active:opacity-90`,style:{border:"1px solid var(--sidebar-line-color)"},children:[e.jsx("input",{id:`contact-checkbox-${t.id}`,type:"checkbox",checked:p,onChange:x,className:"checkbox checkbox-xs 2xl:checkbox-sm checkbox-neutral"}),e.jsx(ue,{contact:t,size:c}),e.jsxs("div",{className:"flex flex-col w-10/12",children:[e.jsx("span",{className:"text-xs 2xl:text-base font-medium truncate",children:t.name}),e.jsxs("span",{className:"2xl:text-xs text-[10px] text-[var(--light-text-color)]",children:[e.jsx("strong",{children:s.contact_card_tipo})," ",m]})]})]})})},Ns=Y.memo(ys),ce=I(t=>({activeLabel:"all",setActiveLabel:a=>t({activeLabel:a})}));let fe=null;const Cs=300*1e3,ws=()=>{var g;const t=h(o=>o.language),[a,s]=C.useState([]),n=P(o=>o.loading),r=C.useRef(null),i=ce(o=>o.activeLabel),l=ce.getState().setActiveLabel,d=L(o=>o.modalOptions),{open:p,close:m}=L.getState();C.useEffect(()=>{const o=Date.now();if(fe&&o-fe.timestamp<Cs){s(fe.data);return}k.Labels("getAllLabels").then(u=>{s(u),fe={data:u,timestamp:o}}).catch(u=>console.error("Erro ao buscar labels:",u))},[]);const c=()=>{var o;return e.jsxs("div",{className:"flex flex-col rounded-md max-h-[42vh] overflow-hidden",style:{width:(o=r.current)==null?void 0:o.offsetWidth},children:[e.jsx("div",{className:"sticky top-0 px-3 py-2",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("span",{className:"text-sm font-medium text-gray-600",children:a.length===0?t.nenhuma_etiqueta_disponivel:a.length===1?`${a.length} ${t.etiqueta_disponivel}`:`${a.length} ${t.etiquetas_disponiveis}`})})}),e.jsxs("div",{className:"flex-1 overflow-y-auto px-2 py-1",children:[a.length>0&&e.jsxs("div",{className:_("flex items-center gap-1 2xl:gap-2 px-2 2xl:px-3 py-1 2xl:py-2 my-0.5 text-xs 2xl:text-sm cursor-pointer rounded-md transition-colors",{"dark:bg-neutral-700 bg-neutral-300":i==="all"},{"hover:bg-[var(--view-btn-inactive-bg)]":i!=="all"}),onClick:()=>{l("all"),m()},children:[e.jsx(Ae,{className:"flex-shrink-0"}),e.jsx("span",{className:"truncate",children:t.todas_etiquetas})]}),a.map(({id:u,name:y})=>e.jsxs("div",{className:_("flex items-center gap-1 2xl:gap-2 px-2 2xl:px-3 py-1 2xl:py-2 my-0.5 text-xs 2xl:text-sm cursor-pointer rounded-md transition-colors",{"dark:bg-neutral-700 bg-neutral-300":i===u},{"hover:bg-[var(--view-btn-inactive-bg)]":i!==u}),onClick:()=>{l(u),m()},children:[e.jsx(ca,{className:"flex-shrink-0"}),e.jsx("span",{className:"truncate",children:y})]},u)),a.length===0&&!n&&e.jsx("div",{className:"flex items-center justify-center py-6 text-gray-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ae,{className:"text-2xl mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:t.nenhuma_etiqueta_encontrada})]})})]})]})},x=o=>{o.stopPropagation(),d?m():p(e.jsx(c,{}),{placement:"bottom"},o.currentTarget)},b=n?t.carregando_etiquetas:a.length===0?t.nenhuma_etiqueta_disponivel:i==="all"?t.todas_etiquetas:((g=a.find(o=>o.id===i))==null?void 0:g.name)||t.selecione_uma_etiqueta;return e.jsx("div",{className:"w-full",children:e.jsxs("button",{ref:r,onClick:x,disabled:n,className:_("w-full flex items-center justify-between gap-1 2xl:gap-2 px-2 2xl:px-3 py-1","2xl:py-2 text-xs 2xl:text-sm rounded-md transition-all duration-200 border",n?"cursor-not-allowed opacity-60":"cursor-pointer hover:scale-[1.01] active:opacity-80",d?"bg-[var(--view-btn-inactive-bg)]":"bg-[var(--filter-btn-inactive-bg)] hover:bg-[var(--view-btn-inactive-bg)]","border-solid border-[var(--sidebar-line-color)]"),children:[e.jsxs("div",{className:"flex items-center gap-1 2xl:gap-2",children:[n?e.jsx(G,{className:"text-sm 2xl:text-lg text-[var(--primary-strong)] animate-spin"}):e.jsx(Ae,{className:"text-sm 2xl:text-lg text-[var(--primary-strong)]"}),e.jsx("span",{className:"truncate font-medium text-[var(--primary-strong)]",children:b})]}),!n&&e.jsx(oe,{className:_("text-sm 2xl:text-lg text-[var(--primary-strong)] transform transition-transform",{"rotate-180":d})})]})})},Ce=I(t=>({activeGroup:"all",setActiveGroup:a=>t({activeGroup:a})}));let ve=null;const Ss=300*1e3,ks=()=>{var g;const t=h(o=>o.language),[a,s]=C.useState([]),n=P(o=>o.loading),r=C.useRef(null),i=Ce(o=>o.activeGroup),l=Ce.getState().setActiveGroup,d=L(o=>o.modalOptions),{open:p,close:m}=L.getState();C.useEffect(()=>{const o=Date.now();if(ve&&o-ve.timestamp<Ss){s(ve.data);return}k.Group("getAllGroups").then(u=>{const y=u.filter(w=>w.name).sort((w,f)=>w.name.localeCompare(f.name));s(y),ve={data:y,timestamp:Date.now()}}).catch(u=>console.error("Erro ao buscar grupos:",u))},[]);const c=()=>{var o;return e.jsxs("div",{className:"flex flex-col rounded-md max-h-[42vh] overflow-hidden",style:{width:(o=r.current)==null?void 0:o.offsetWidth},children:[e.jsx("div",{className:"sticky top-0 px-3 py-2",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("span",{className:"text-xs 2xl:text-sm font-medium text-gray-600",children:a.length===0?t.nenhum_grupo_disponivel:a.length===1?`${a.length} ${t.grupo_disponivel}`:`${a.length} ${t.grupos_disponiveis}`})})}),e.jsxs("div",{className:"flex-1 overflow-y-auto px-2 py-1",children:[a.length>0&&e.jsxs("div",{className:_("flex items-center gap-1 2xl:gap-2 px-2 2xl:px-3 py-1 2xl:py-2 my-0.5 text-xs 2xl:text-sm cursor-pointer rounded-md transition-all duration-200",{"dark:bg-neutral-700 bg-neutral-300":i==="all"},{"hover:bg-[var(--view-btn-inactive-bg)]":i!=="all"}),onClick:()=>{l("all"),m()},children:[e.jsx(Fe,{className:"flex-shrink-0"}),e.jsx("span",{className:"truncate",children:t.todos_grupos})]}),a.map(({id:u,name:y})=>e.jsxs("div",{className:_("flex items-center gap-1 2xl:gap-2 px-2 2xl:px-3 py-1 2xl:py-2 my-0.5 text-xs 2xl:text-sm cursor-pointer rounded-md transition-all duration-200",{"dark:bg-neutral-700 bg-neutral-300":i===u},{"hover:bg-[var(--view-btn-inactive-bg)]":i!==u}),onClick:()=>{l(u),m()},children:[e.jsx(xt,{className:"flex-shrink-0"}),e.jsx("span",{className:"truncate",children:y})]},u.toString())),a.length===0&&!n&&e.jsx("div",{className:"flex items-center justify-center py-6 text-gray-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Fe,{className:"text-2xl mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:t.nenhum_grupo_encontrado})]})})]})]})},x=o=>{o.stopPropagation(),d?m():p(e.jsx(c,{}),{placement:"bottom"},o.currentTarget)},b=n?t.carregando_grupos:a.length===0?t.nenhum_grupo_disponivel:i==="all"?t.todos_grupos:((g=a.find(o=>o.id===i))==null?void 0:g.name)||t.selecione_um_grupo;return e.jsx("div",{className:"w-full",children:e.jsxs("button",{ref:r,onClick:x,disabled:n,className:_("w-full flex items-center justify-between gap-1 2xl:gap-2 px-2 2xl:px-3 py-1","2xl:py-2 text-xs 2xl:text-sm rounded-md transition-all duration-200 border",n?"cursor-not-allowed opacity-60":"cursor-pointer hover:scale-[1.01] active:opacity-80",d?"bg-[var(--view-btn-inactive-bg)]":"bg-[var(--filter-btn-inactive-bg)] hover:bg-[var(--view-btn-inactive-bg)]","border-solid border-[var(--sidebar-line-color)]"),children:[e.jsxs("div",{className:"flex items-center gap-1 2xl:gap-2",children:[n?e.jsx(G,{className:"text-sm 2xl:text-lg text-[var(--primary-strong)] animate-spin"}):e.jsx(Fe,{className:"text-sm 2xl:text-lg text-[var(--primary-strong)]"}),e.jsx("span",{className:"truncate font-medium text-[var(--primary-strong)]",children:b})]}),!n&&e.jsx(oe,{className:_("text-sm 2xl:text-lg text-[var(--primary-strong)] transform transition-transform",{"rotate-180":d})})]})})},Q=I(t=>({activeCrm:"all",setActiveCrm:a=>t({activeCrm:a})})),ee=I((t,a)=>({activeSwitch:"tab",setActiveSwitch:s=>{a().activeSwitch!==s&&t({activeSwitch:s})}})),de=I(t=>({activeCrmTab:"all",setActiveCrmTab:a=>t({activeCrmTab:a}),resetActiveCrmTab:()=>t({activeCrmTab:"all"})})),me=I(t=>({activeUserTab:"all",setActiveUserTab:a=>t({activeUserTab:a})}));function Ge(){const{crm:t}=$e.getState(),{userTabs:a}=Re.getState(),{activeCrm:s}=Q.getState(),{activeCrmTab:n}=de.getState(),{activeSwitch:r}=ee.getState(),{activeUserTab:i}=me.getState();return{crms:t,activeCrm:s,activeSwitch:r,activeCrmTab:n,activeUserTab:i,userTabs:a}}const wt=()=>{const{crms:t,activeCrm:a,activeSwitch:s}=Ge();if(s!=="crm"||a==="all")return[];const n=t.find(r=>r.id===a);return(n==null?void 0:n.list)||[]},et=t=>{const{loading:a}=P.getState();return _("flex flex-1 items-center text-xs 2xl:text-sm justify-center gap-1 py-0.5 2xl:py-1 rounded-md transition-all duration-200 font-medium",!a&&"hover:scale-[1.02] active:scale-95 active:opacity-80",a&&"opacity-50 cursor-not-allowed",t?"bg-[var(--filter-btn-active-bg)] text-[var(--filter-btn-active-text)] shadow-sm border border-[var(--filter-btn-active-bg)]":"text-[var(--primary-strong)] bg-[var(--view-btn-inactive-bg)]")},As=()=>{var d;const{language:t}=h.getState(),{loading:a}=P.getState(),{crms:s,activeCrm:n,activeCrmTab:r}=Ge();if(a)return t.carregando;if(r==="all"){const p=((d=s.find(m=>m.id===n))==null?void 0:d.name)||"";return`${t.todas_abas_crm} ${p}`}const l=wt().find(p=>p.id===r);return(l==null?void 0:l.name)||t.selecione_uma_aba},Fs=()=>{var d,p;const{language:t}=h.getState(),{activeSwitch:a,activeCrm:s,activeUserTab:n,crms:r,userTabs:i}=Ge(),{loading:l}=P.getState();if(l)return t.carregando;if(a==="crm")return s==="all"?t.todos_crms:((d=r.find(m=>m.id===s))==null?void 0:d.name)||t.selecione_um_crm;if(a==="tab")return n==="all"?t.todas_abas:((p=i.find(m=>m.id===n))==null?void 0:p.tag)||t.selecione_uma_aba},Ps=({crmTabsFilterRef:t})=>{var d;const a=h(p=>p.language),s=wt(),n=de(p=>p.activeCrmTab),r=de.getState().setActiveCrmTab,i=P(p=>p.loading),l=L.getState().close;return e.jsx("div",{className:"flex flex-col rounded-md max-h-[42vh] overflow-hidden",style:{width:(d=t.current)==null?void 0:d.offsetWidth},children:e.jsxs("div",{className:"flex-1 overflow-y-auto px-2 py-1",children:[e.jsxs("div",{className:_("flex items-center gap-1 2xl:gap-2 px-2 2xl:px-3 py-1 2xl:py-2 my-0.5 text-xs 2xl:text-sm cursor-pointer rounded-md",{"dark:bg-neutral-700 bg-neutral-300":n==="all"},{"hover:bg-[var(--view-btn-inactive-bg)]":n!=="all"}),onClick:()=>{r("all"),l()},children:[e.jsx(W,{className:"flex-shrink-0"}),e.jsx("span",{className:"truncate",children:a.todas_abas})]}),s.map(p=>e.jsxs("div",{className:_("flex items-center gap-1 2xl:gap-2 px-2 2xl:px-3 py-1 2xl:py-2 my-0.5 text-xs 2xl:text-sm cursor-pointer rounded-md",{"dark:bg-neutral-700 bg-neutral-300":n===p.id,"hover:bg-[var(--view-btn-inactive-bg)]":n!==p.id}),onClick:()=>{r(p.id),l()},children:[e.jsx(W,{className:"flex-shrink-0"}),e.jsx("span",{className:"truncate",children:p.name})]},p.id)),s.length===0&&!i&&e.jsx("div",{className:"flex items-center justify-center py-6 text-gray-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx(W,{className:"text-2xl mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:a.nenhuma_aba_encontrada})]})})]})})},Is=({mainFilterRef:t})=>{var w;const a=h(f=>f.language),s=Re(f=>f.userTabs),n=me(f=>f.activeUserTab),r=me.getState().setActiveUserTab,i=ee(f=>f.activeSwitch),l=P(f=>f.loading),d=$e(f=>f.crm),p=Q(f=>f.activeCrm),m=Q.getState().setActiveCrm,c=L.getState().close,x=i==="crm",b=x?d:s,g=x?p:n,o=x?m:r,u=x?a.todos_crms:a.todas_abas,y=x?ze:W;return e.jsx("div",{className:"flex flex-col rounded-md max-h-[42vh] overflow-hidden",style:{width:(w=t.current)==null?void 0:w.offsetWidth},children:e.jsxs("div",{className:"flex-1 overflow-y-auto px-2 py-1",children:[e.jsxs("div",{className:_("flex items-center gap-1 2xl:gap-2 px-2 2xl:px-3 py-1 2xl:py-2 my-0.5 text-xs 2xl:text-sm cursor-pointer rounded-md",{"dark:bg-neutral-700 bg-neutral-300":g==="all"},{"hover:bg-[var(--view-btn-inactive-bg)]":g!=="all"}),onClick:()=>{o("all"),c()},children:[e.jsx(y,{className:"flex-shrink-0"}),e.jsx("span",{className:"truncate",children:u})]}),b.map(f=>{const A="name"in f?f.name:f.tag;return e.jsxs("div",{className:_("flex items-center gap-1 2xl:gap-2 px-2 2xl:px-3 py-1 2xl:py-2 my-0.5 text-xs 2xl:text-sm cursor-pointer rounded-md",{"dark:bg-neutral-700 bg-neutral-300":g===f.id,"hover:bg-[var(--view-btn-inactive-bg)]":g!==f.id}),onClick:()=>{o(f.id),c()},children:[e.jsx(y,{className:"flex-shrink-0"}),e.jsx("span",{className:"truncate",children:A})]},f.id)}),b.length===0&&!l&&e.jsx("div",{className:"flex items-center justify-center py-6 text-gray-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx(y,{className:"text-2xl mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:a.nenhum_item_encontrado})]})})]})})},Ts=()=>{const t=h(u=>u.language),a=ee(u=>u.activeSwitch),s=ee.getState().setActiveSwitch,n=P(u=>u.loading),r=C.useRef(null),i=C.useRef(null),{open:l,close:d}=L.getState(),p=L(u=>u.modalOptions),m=Q(u=>u.activeCrm),c=u=>{n||a===u||(s(u),d())},x=(u,y="main")=>{u.stopPropagation(),y==="main"?p?d():l(e.jsx(Is,{mainFilterRef:r}),{placement:"bottom"},u.currentTarget,5):p?d():l(e.jsx(Ps,{crmTabsFilterRef:i}),{placement:"bottom"},u.currentTarget,5)},b=p&&r.current===document.activeElement,g=p&&i.current===document.activeElement,o=a==="crm"&&m!=="all";return e.jsxs("div",{className:"w-full flex flex-col gap-1 2xl:gap-2 2xl:mt-1",children:[e.jsxs("div",{className:"w-full flex gap-1 2xl:gap-2 items-center",children:[e.jsxs("button",{className:et(a==="tab"),onClick:n?void 0:()=>c("tab"),disabled:n,children:[e.jsx(W,{}),e.jsx("span",{className:"font-bold",children:t.abas})]}),e.jsxs("button",{className:et(a==="crm"),onClick:n?void 0:()=>c("crm"),disabled:n,children:[e.jsx(ze,{}),e.jsx("span",{className:"font-bold",children:t.crms})]})]}),e.jsxs("button",{ref:r,onClick:u=>x(u,"main"),disabled:n,className:_("w-full flex items-center justify-between gap-1 2xl:gap-2 px-2 2xl:px-3 py-1 2xl:py-2 text-xs 2xl:text-sm cursor-pointer border rounded-md transition-all duration-200",n?"cursor-not-allowed opacity-60 bg-gray-100":"cursor-pointer hover:scale-[1.01] active:opacity-80",b?"bg-[var(--view-btn-inactive-bg)]":"bg-[var(--filter-btn-inactive-bg)] hover:bg-[var(--view-btn-inactive-bg)]","border-solid border-[var(--sidebar-line-color)]"),children:[e.jsxs("div",{className:"flex items-center gap-1 2xl:gap-2",children:[n?e.jsx(G,{className:"text-sm 2xl:text-lg text-[var(--primary-strong)] animate-spin"}):a==="tab"?e.jsx(W,{className:"text-sm 2xl:text-lg text-[var(--primary-strong)]"}):e.jsx(ze,{className:"text-sm 2xl:text-lg text-[var(--primary-strong)]"}),e.jsx("span",{className:"truncate font-medium text-[var(--primary-strong)]",children:Fs()})]}),!n&&e.jsx(oe,{className:_("text-sm 2xl:text-lg text-[var(--primary-strong)] transform transition-transform",{"rotate-180":b})})]}),o&&e.jsxs("button",{ref:i,onClick:u=>x(u,"crmTabs"),disabled:n,className:_("w-full flex items-center justify-between gap-1 2xl:gap-2 px-2 2xl:px-3 py-1 2xl:py-2 text-xs 2xl:text-sm cursor-pointer border rounded-md transition-all duration-200",n?"cursor-not-allowed opacity-60 bg-gray-100":"cursor-pointer hover:scale-[1.01] active:opacity-80",g?"bg-[var(--view-btn-inactive-bg)]":"bg-[var(--filter-btn-inactive-bg)] hover:bg-[var(--view-btn-inactive-bg)]","border-solid border-[var(--sidebar-line-color)]"),children:[e.jsxs("div",{className:"flex items-center gap-1 2xl:gap-2",children:[n?e.jsx(G,{className:"text-sm 2xl:text-lg text-[var(--primary-strong)] animate-spin"}):e.jsx(W,{className:"text-sm 2xl:text-lg text-[var(--primary-strong)]"}),e.jsx("span",{className:"truncate font-medium text-[var(--primary-strong)]",children:As()})]}),!n&&e.jsx(oe,{className:_("text-sm 2xl:text-lg text-[var(--primary-strong)] transform transition-transform",{"rotate-180":g})})]})]})},Te={gender:null,birthDate:null,city:null,state:null,leadSource:null,entryDate:null,exitDate:null,company:null,jobTitle:null,interestedProducts:[]},O=I()(xe((t,a)=>({tempFilters:Te,appliedFilters:Te,currentProduct:"",updateTempField:(s,n)=>{t(r=>({tempFilters:{...r.tempFilters,[s]:n}}))},setCurrentProduct:s=>{t({currentProduct:s})},addProduct:()=>{const{currentProduct:s,tempFilters:n}=a(),r=s.trim();r&&!n.interestedProducts.includes(r)&&t(i=>({tempFilters:{...i.tempFilters,interestedProducts:[...i.tempFilters.interestedProducts,r]},currentProduct:""}))},removeProduct:s=>{t(n=>({tempFilters:{...n.tempFilters,interestedProducts:n.tempFilters.interestedProducts.filter(r=>r!==s)}}))},clearTempFilters:()=>{t({tempFilters:Te,currentProduct:""})},applyFilters:()=>{const{tempFilters:s}=a();t({appliedFilters:s})}}),{name:"advanced-filters-eem",version:1,partialize:t=>({tempFilters:t.tempFilters,appliedFilters:t.appliedFilters})})),R=({id:t,label:a,type:s="text",placeholder:n,options:r,grid:i=!1})=>{const l=h(x=>x.language),d=O(x=>x.tempFilters),p=O(x=>x.updateTempField),m=d[t]||"",c=x=>{p(t,x||null)};return e.jsxs("div",{className:`space-y-1 ${i?"flex-1":""}`,children:[e.jsx("label",{htmlFor:t,className:"block text-sm font-semibold",children:a}),r?e.jsxs("select",{id:t,value:m,onChange:x=>c(x.target.value),className:"select select-sm !leading-none w-full border border-solid border-[var(--fallback-bc,oklch(var(--bc)/.2))]",children:[e.jsx("option",{value:"",children:n||`${l.selecione} ${a.toLowerCase()}`}),r.map(x=>e.jsx("option",{value:x.value,children:x.label},x.value))]}):e.jsx("input",{id:t,type:s,placeholder:n,className:"input input-sm input-bordered w-full border border-solid transition-all duration-200",value:m,onChange:x=>c(x.target.value)})]})},zs=[{value:"AC",label:"Acre"},{value:"AL",label:"Alagoas"},{value:"AP",label:"Amapá"},{value:"AM",label:"Amazonas"},{value:"BA",label:"Bahia"},{value:"CE",label:"Ceará"},{value:"DF",label:"Distrito Federal"},{value:"ES",label:"Espírito Santo"},{value:"GO",label:"Goiás"},{value:"MA",label:"Maranhão"},{value:"MT",label:"Mato Grosso"},{value:"MS",label:"Mato Grosso do Sul"},{value:"MG",label:"Minas Gerais"},{value:"PA",label:"Pará"},{value:"PB",label:"Paraíba"},{value:"PR",label:"Paraná"},{value:"PE",label:"Pernambuco"},{value:"PI",label:"Piauí"},{value:"RJ",label:"Rio de Janeiro"},{value:"RN",label:"Rio Grande do Norte"},{value:"RS",label:"Rio Grande do Sul"},{value:"RO",label:"Rondônia"},{value:"RR",label:"Roraima"},{value:"SC",label:"Santa Catarina"},{value:"SP",label:"São Paulo"},{value:"SE",label:"Sergipe"},{value:"TO",label:"Tocantins"}],Ds=[{value:"whatsapp",label:"WhatsApp"},{value:"youtube",label:"YouTube"},{value:"facebook",label:"Facebook"},{value:"instagram",label:"Instagram"},{value:"linkedin",label:"LinkedIn"},{value:"tiktok",label:"TikTok"},{value:"google",label:"Google"},{value:"site",label:h.getState().language.lead_sources_site||"Site"},{value:"formulario",label:h.getState().language.lead_sources_formulario||"Formulário"},{value:"crm",label:"CRM"},{value:"outros",label:h.getState().language.lead_sources_outros||"Outros"}],Ls=[{value:"male",label:h.getState().language.gender_masculino||"Masculino"},{value:"female",label:h.getState().language.gender_feminino||"Feminino"}],Es=()=>{const t=h(d=>d.language),a=O(d=>d.tempFilters),s=O(d=>d.currentProduct),{setCurrentProduct:n,addProduct:r,removeProduct:i}=O.getState(),l=d=>{d.key==="Enter"&&(d.preventDefault(),s.trim()&&r())};return e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-semibold",children:t.digite_produto_interesse}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("input",{type:"text",placeholder:t.digite_produto_interesse,className:"input input-sm input-bordered flex-1 border border-solid transition-all duration-200",value:s,onChange:d=>n(d.target.value),onKeyDown:l}),e.jsx("button",{type:"button",onClick:r,className:"bg-[var(--primaria)] text-white p-2 rounded-md",children:t.adicionar})]}),a.interestedProducts.length>0&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-semibold",children:t.produtos_selecionados}),e.jsx("div",{className:"flex flex-wrap gap-2",children:a.interestedProducts.map((d,p)=>e.jsxs("button",{type:"button",title:t.remover_produto,onClick:()=>i(d),className:`bg-gray-100 dark:bg-gray-700 px-3 py-1 rounded-full text-sm flex items-center
                gap-2 hover:scale-105 active:scale-90 cursor-pointer transition-all duration-150`,children:[e.jsx("span",{className:"truncate flex-1 min-w-0",children:d}),e.jsx(da,{className:"text-red-500 hover:text-red-600 cursor-pointer flex-shrink-0 w-4 h-4"})]},p))})]})]})},Ms=()=>{const t=h(r=>r.language),{applyFilters:a,clearTempFilters:s}=O.getState(),n=r=>{r.preventDefault(),a(),E.getState().close(),z({type:"Success",message:t.filtros_aplicados_sucesso})};return e.jsxs("div",{className:"w-[520px] max-h-[92vh] overflow-y-auto",children:[e.jsx(ut,{children:t.filtragem_avancada}),e.jsxs("form",{className:"space-y-3 mt-3",onSubmit:r=>r.preventDefault(),children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(R,{id:"gender",label:t.genero,options:Ls,grid:!0}),e.jsx(R,{id:"birthDate",label:t.data_nascimento,type:"date",grid:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(R,{id:"city",label:t.cidade,placeholder:t.digite_cidade,grid:!0}),e.jsx(R,{id:"state",label:t.estado,options:zs,grid:!0})]}),e.jsx(R,{id:"leadSource",label:t.origem_lead,options:Ds}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(R,{id:"entryDate",label:t.data_entrada,type:"date",grid:!0}),e.jsx(R,{id:"exitDate",label:t.data_saida,type:"date",grid:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(R,{id:"company",label:t.empresa,placeholder:t.nome_empresa,grid:!0}),e.jsx(R,{id:"jobTitle",label:t.cargo,placeholder:t.cargo_placeholder,grid:!0})]}),e.jsx(Es,{}),e.jsxs("div",{className:"pt-2 w-full flex justify-center gap-3",children:[e.jsx(Ke,{type:"reset",name:t.limpar,funcao:s},"clearTempFilters"),e.jsx(Ke,{type:"submit",name:t.filtrar,funcao:n},"applyFilters")]})]})]})},Z=I()(xe((t,a)=>({options:[{key:"all"},{key:"birthdaysThisMonth"},{key:"genderMale"},{key:"genderFemale"}],selectedOption:"all",setSelectedOption:s=>{a().selectedOption!==s&&t({selectedOption:s})}}),{name:"useProfilesOptions-store",version:1,partialize:t=>({selectedOption:t.selectedOption})}));function St(t){const a=h.getState().language;return{all:a.todos_os_contatos,birthdaysThisMonth:a.aniversariantes_mes,genderMale:a.sexo_masculino,genderFemale:a.sexo_feminino}[t]??a.opcao_desconhecida}function kt(t){const a="text-sm 2xl:text-base flex-shrink-0";return{all:e.jsx(Ye,{className:a}),birthdaysThisMonth:e.jsx(ua,{className:a}),genderMale:e.jsx(xa,{className:a}),genderFemale:e.jsx(ma,{className:a})}[t]??e.jsx(Ye,{className:a})}const $s=({profileOptionsRef:t})=>{var i;const a=Z(l=>l.options),s=Z(l=>l.selectedOption),n=Z.getState().setSelectedOption,r=L.getState().close;return e.jsx("div",{className:"flex flex-col rounded-md max-h-[42vh] overflow-hidden",style:{width:(i=t.current)==null?void 0:i.offsetWidth},children:e.jsx("div",{className:"flex-1 overflow-y-auto px-2 py-0.5 2xl:py-1",children:a.map(l=>e.jsxs("div",{className:_("flex items-center gap-1 2xl:gap-2 px-2 2xl:px-3 py-1 2xl:py-2 my-0.5 text-xs 2xl:text-sm cursor-pointer rounded-md",{"dark:bg-neutral-700 bg-neutral-300":l.key===s,"hover:bg-[var(--view-btn-inactive-bg)]":l.key!==s}),onClick:()=>{n(l.key),r()},children:[kt(l.key),e.jsx("span",{className:"truncate",children:St(l.key)})]},l.key))})})},Rs=()=>{const t=h(c=>c.language),a=C.useRef(null),s=C.useRef(null),n=O(c=>c.appliedFilters),r=Object.values(n).filter(c=>(c==null?void 0:c.length)??c).length,i=P(c=>c.loading),l=L(c=>c.modalOptions),d=()=>{const{open:c}=E.getState();c(e.jsx(Ms,{}))},p=c=>{const{open:x,close:b}=L.getState();l?b():x(e.jsx($s,{profileOptionsRef:s}),{placement:"bottom"},c.currentTarget,5)},m=Z(c=>c.selectedOption);return e.jsxs("div",{className:"w-full flex items-center gap-1 2xl:gap-2",children:[e.jsxs("button",{type:"button",ref:s,onClick:p,disabled:i,className:_("w-full flex items-center justify-between px-1.5 2xl:px-3 py-1 2xl:py-2 border rounded-md transition-all duration-200",i?"cursor-not-allowed opacity-60 bg-gray-100":"cursor-pointer hover:scale-[1.01] active:opacity-80",l?"bg-[var(--view-btn-inactive-bg)]":"bg-[var(--filter-btn-inactive-bg)] hover:bg-[var(--view-btn-inactive-bg)]","border-solid border-[var(--sidebar-line-color)]"),children:[e.jsxs("div",{className:"flex items-center gap-2",children:[i?e.jsx(G,{className:"text-sm 2xl:text-lg text-[var(--primary-strong)] animate-spin"}):kt(m),e.jsx("span",{className:"truncate text-xs 2xl:text-base font-medium text-[var(--primary-strong)]",children:St(m)})]}),!i&&e.jsx(oe,{className:_("text-sm 2xl:text-lg text-[var(--primary-strong)] transform transition-transform",{"rotate-180":l})})]}),e.jsx("button",{type:"button",ref:a,title:t.abrir_filtragem_avancada,onClick:d,disabled:i,className:_("w-fit flex items-center justify-between px-1.5 2xl:px-3 py-1 2xl:py-2 border rounded-md transition-all duration-200",i?"cursor-not-allowed opacity-60 bg-gray-100":"cursor-pointer hover:scale-[1.01] active:opacity-80","bg-[var(--filter-btn-inactive-bg)] hover:bg-[var(--view-btn-inactive-bg)]","border-solid border-[var(--sidebar-line-color)]"),children:e.jsxs("div",{className:"flex items-center gap-1 2xl:gap-2",children:[i?e.jsx(G,{className:"text-sm 2xl:text-lg text-[var(--primary-strong)] animate-spin"}):e.jsx(dt,{className:"text-sm 2xl:text-lg text-[var(--primary-strong)]"}),e.jsxs("div",{className:"truncate text-xs 2xl:text-base font-medium text-[var(--primary-strong)]",children:[e.jsxs("span",{children:[t.filtragem_avancada," "]}),e.jsx("div",{className:"badge badge-xs 2xl:badge-sm badge-outline bg-[var(--primaria)]",children:r})]})]})})]})},Os=()=>{const t=J(s=>s.activeFilter);return{savedContacts:null,inbox:null,labels:e.jsx(ws,{}),groups:null,groupContacts:e.jsx(ks,{}),crmOrTabs:e.jsx(Ts,{}),contactProfile:e.jsx(Rs,{}),importSpreadsheet:null}[t.id]||null},Gs=()=>{const t=ke.getState().setImportedContacts,a=E.getState().open,s=h(r=>r.language),n=()=>{a(e.jsx(jt,{list:r=>t(r)}))};return e.jsxs("button",{type:"button",title:s.importar_planilha,className:"rounded-md text-xs 2xl:text-sm px-2 py-1 gap-1 transition-all active:scale-95 flex items-center justify-center border border-solid duration-200 hover:scale-[0.98]",onClick:()=>n(),children:[s.importar_contatos,e.jsx(mt,{})]})},Bs=()=>{const t=J(s=>s.activeFilter);return{savedContacts:null,inbox:null,labels:null,groups:null,groupContacts:null,crmOrTabs:null,contactProfile:null,importSpreadsheet:e.jsx(Gs,{})}[t.id]||null},Vs=()=>{const t=h(f=>f.language),[a,s]=C.useState(""),n=P(f=>f.contacts),r=P(f=>f.loading),i=j(f=>f.currentCampaignId),l=j(f=>f.campaigns),{updateCampaign:d}=j.getState(),p=l.find(f=>f.id===i),m=(p==null?void 0:p.selectedContacts)||[],c=C.useMemo(()=>{if(!a.trim())return n;const f=a.toLowerCase();return n.filter(A=>{var M,F;return((M=A.name)==null?void 0:M.toLowerCase().includes(f))||((F=A.phone)==null?void 0:F.toLowerCase().includes(f))})},[n,a]),{breakpoint:x}=B(),b={estimateSize:x==="2xl"?70:44,gap:x==="2xl"?8:4,padding:x==="2xl"?8:4},g=Y.useRef(null),o=Oe({count:c.length,getScrollElement:()=>g.current,estimateSize:()=>b.estimateSize,paddingStart:b.padding,paddingEnd:b.padding,gap:b.gap,overscan:10}),u=o.getTotalSize(),y=o.getVirtualItems(),w=()=>{if(!p)return;const f=new Set(c.map(F=>F.id)),M=c.every(F=>m.some(v=>v.id===F.id))?m.filter(F=>!f.has(F.id)):[...m,...c.filter(F=>!m.some(v=>v.id===F.id))];d(p.id,{selectedContacts:M})};return e.jsxs("div",{className:"bg-[var(--eem-bg-secondary)] p-2 rounded-md h-fit",children:[e.jsxs("div",{className:"w-full flex gap-1 2xl:gap-2 h-8 2xl:h-11 items-stretch px-1 2xl:px-2",children:[e.jsxs("div",{className:"relative flex-1 h-full",children:[e.jsx(pa,{className:"absolute text-base 2xl:text-xl left-3 top-1/2 transform -translate-y-1/2 text-black"}),e.jsx("input",{role:"search",type:"text",placeholder:t.contacts_list_pesquisar,value:a,onChange:f=>s(f.target.value),className:_("w-full pl-8 2xl:pl-10 h-full border text-sm 2xl:text-base rounded-md","bg-[var(--search-bg-color)] text-black","placeholder:!text-sm 2xl:placeholder:!text-base placeholder:!text-slate-500")})]}),e.jsxs("button",{onClick:w,className:`w-fit px-2 flex items-center justify-center rounded-md 
             h-full bg-[var(--selectAll-btn-bg-color)] hover:bg-[var(--selectAll-btn-hover-bg)] 
             text-white text-sm 2xl:text-base transition-all duration-150
             hover:scale-[1.02] active:scale-95 active:opacity-80
             border border-solid border-[var(--eem-border-primary)]`,children:[e.jsx(ga,{className:"text-white text-base 2xl:text-xl"}),e.jsx("span",{className:"ml-1 font-medium",children:c.every(f=>m.some(A=>A.id===f.id))?t.contacts_list_desmarcar_tudo:t.contacts_list_selecionar_tudo})]})]}),e.jsx("div",{className:"w-full px-1 2xl:px-2 py-1",children:e.jsx(Os,{})}),e.jsx("div",{className:"w-full px-2 pb-2 border-b-2 border-solid border-[var(--sidebar-line-color)]",children:r&&n.length===0?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(G,{className:"text-xs 2xl:text-base animate-spin"}),e.jsx("span",{className:"text-xs 2xl:text-base",children:t.contacts_list_carregando})]}):e.jsx("p",{className:"2xl:text-base text-xs",children:`${n.length} ${t.contacts_list_disponiveis} • ${m.length} ${t.contacts_list_selecionados}`})}),e.jsx("div",{className:"w-full overflow-auto max-h-[40dvh] px-1",ref:g,children:r&&n.length===0?e.jsx("div",{className:"flex h-[38vh] justify-center items-center",children:e.jsx(G,{size:48,className:"animate-spin"})}):c.length===0?e.jsxs("div",{className:"flex flex-col h-[36dvh] justify-center items-center text-gray-600 dark:text-gray-400",children:[e.jsx(ba,{className:"2xl:mb-3 mb-1 opacity-60 text-3xl 2xl:text-4xl"}),e.jsx("p",{className:"text-base 2xl:text-lg font-medium 2xl:mb-1",children:a.trim()?t.contacts_list_nenhum_encontrado:t.contacts_list_nenhum_disponivel}),e.jsx("p",{className:"text-xs 2xl:text-sm text-center max-w-xs mb-1",children:a.trim()?t.contacts_list_ajustar_busca:n.length===0?t.contacts_list_nao_existe:t.contacts_list_aparecerao_aqui}),e.jsx(Bs,{})]}):e.jsx("div",{style:{height:u,position:"relative"},children:y.map(f=>{const A=c[f.index];return A?e.jsx(Ns,{contact:A,virtualItem:f},A.id):null})})})]})},qs=({selectedContact:t,virtualItem:a})=>{const s=h(c=>c.language),{breakpoint:n}=B(),r=j(c=>c.currentCampaignId),i=j(c=>c.campaigns),{updateCampaign:l}=j.getState(),d=i.find(c=>c.id===r),p=n==="2xl"?"sm":"xs",m=c=>{if(!d)return;const x=d.selectedContacts.filter(b=>b.id!==c);l(d.id,{selectedContacts:x})};return e.jsx("div",{className:"absolute top-0 left-0 w-full will-change-transform",style:{height:a.size,transform:`translateY(${a.start}px)`},children:e.jsxs("label",{htmlFor:`selectedContact-${t.id}`,className:`flex items-center justify-between bg-[var(--contact-card-bg)] rounded-md p-1 border border-solid
        border-[var(--sidebar-line-color)] cursor-pointer hover:scale-[1.02] active:scale-95 active:opacity-80 transition-all duration-200`,title:s.remover_contato,children:[e.jsxs("div",{className:"flex items-center gap-1.5 2xl:gap-3 w-10/12",children:[e.jsx(ue,{contact:t,size:p}),e.jsx("p",{className:"text-xs 2xl:text-base font-medium truncate flex-1",children:t.name})]}),e.jsx("button",{id:`selectedContact-${t.id}`,className:`hover:bg-[var(--view-btn-inactive-bg)] hover:scale-[1.04] active:scale-90
          active:opacity-80 p-1 2xl:p-1.5 rounded-md transition-all duration-200 text-red-500`,onClick:()=>m(t.id),children:e.jsx(Me,{className:"text-sm 2xl:text-xl"})})]},t.id)})},tt={contactId:"",name:"",surname:"",syncAdressBook:!0},at={isChecking:!1,isValid:null,message:""},K=I(t=>({formData:tt,validation:at,setFormData:a=>t(s=>({formData:{...s.formData,...a}})),setValidation:a=>t(()=>({validation:a})),resetForm:()=>t(()=>({formData:tt,validation:at}))})),Us=()=>{const t=K(n=>n.validation);if(!t.message)return null;const a=()=>{const n="flex items-center gap-2 mt-2 text-sm";return t.isChecking?`${n} text-base-content/60`:t.isValid===!1?`${n} text-error`:t.isValid===!0?`${n} text-success`:n},s=()=>t.isChecking?e.jsx("span",{className:"loading loading-spinner loading-xs"}):t.isValid===!1?e.jsx(ha,{className:"w-4 h-4"}):t.isValid===!0?e.jsx(fa,{className:"w-4 h-4"}):null;return e.jsxs("div",{className:a(),children:[s(),e.jsx("span",{children:t.message})]})},Hs=()=>{const t=h(r=>r.language),a=K(r=>r.validation),s=a.isChecking||a.isValid===!1||!a.message.trim(),n=`
    w-full mt-6 px-6 py-3 
    bg-gray-900 hover:bg-gray-800 active:bg-gray-950 
    dark:bg-gray-100 dark:hover:bg-gray-200 dark:active:bg-gray-50 
    text-white dark:text-gray-900 
    font-medium rounded-xl 
    transition-all duration-200 ease-out 
    flex items-center justify-center gap-2 
    shadow-lg hover:shadow-xl 
    dark:shadow-gray-200/20 dark:hover:shadow-gray-200/30 
    transform hover:-translate-y-0.5 active:translate-y-0 
    focus:outline-none focus:ring-2 focus:ring-gray-500 
    dark:focus:ring-gray-400 focus:ring-offset-2 
    dark:focus:ring-offset-gray-800 
    disabled:opacity-50 disabled:cursor-not-allowed 
    disabled:transform-none group
  `.replace(/\s+/g," ").trim();return e.jsx("button",{type:"submit",disabled:s,className:n,children:a.isChecking?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"loading loading-spinner loading-sm"}),e.jsx("span",{className:"tracking-wide",children:t.verificando})]}):e.jsxs(e.Fragment,{children:[e.jsx(va,{className:"w-4 h-4 transition-transform duration-200 group-hover:scale-110"}),e.jsx("span",{className:"tracking-wide",children:t.criar_adicionar_contato})]})})};let le=null;const Ws=500,Ks=t=>{const{language:a}=h.getState(),{setValidation:s}=K.getState();le&&clearTimeout(le),s({isChecking:!1,isValid:null,message:""});const n=t.replace(/\D/g,"");n.trim()&&(le=setTimeout(async()=>{s({isChecking:!0,isValid:null,message:a.verificando_numero});try{const[r]=await Promise.all([k.Contact("queryExists",n),new Promise(i=>setTimeout(i,Ws))]);s({isChecking:!1,isValid:r&&r!=="undefined",message:r&&r!=="undefined"?a.numero_valido_existe:a.numero_invalido_nao_existe})}catch{s({isChecking:!1,isValid:!1,message:a.erro_verificar_numero})}},1e3))},Ys=()=>{le&&clearTimeout(le)},Js=async()=>{const{language:t}=h.getState(),{formData:a}=K.getState(),{currentCampaignId:s,campaigns:n,updateCampaign:r}=j.getState();try{const i=n.find(o=>o.id===s);if(!i)return z({type:"Error",message:t.nenhuma_campanha_ativa}),!1;const l={contactId:a.contactId,name:a.name,options:{surname:a.surname,syncAdressBook:a.syncAdressBook}},d=await k.Contact("save",l);if(!d||typeof d=="string"&&d==="undefined")return z({type:"Error",message:t.erro_salvar_contato}),!1;const p=d.id.toString(),m=await k.Contact("getProfilePictureUrl",p).catch(()=>null),c=m&&m!=="undefined"?m:null,x={id:p,name:d.name,phone:ja(p),avatarUrl:c};if(i.selectedContacts.some(o=>o.id===x.id))return z({type:"Error",message:t.contato_ja_existe_campanha}),!1;const g=[...i.selectedContacts,x];return r(i.id,{selectedContacts:g}),z({type:"Success",message:t.contato_adicionado_sucesso}),!0}catch(i){return console.error("Erro ao criar contato:",i),z({type:"Error",message:t.erro_criar_contato}),!1}},Xs=()=>{const t=h(m=>m.language),a=K(m=>m.formData),s=K(m=>m.validation),{setFormData:n,resetForm:r}=K.getState(),{close:i}=E.getState(),l=(m,c)=>{m==="contactId"&&typeof c=="string"?(n({contactId:c}),Ks(c)):n({[m]:c})},d=async m=>{if(m.preventDefault(),s.isValid===!1)return;await Js()&&(i(),r())},p=()=>{const m="!input !input-bordered !pl-14 !focus:input-neutral";return s.isValid===!1?`${m} !input-error`:s.isValid===!0?`${m} !input-success`:m};return C.useEffect(()=>()=>{Ys()},[]),e.jsxs("form",{onSubmit:d,className:"space-y-2",children:[e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text font-medium",children:t.numero_whatsapp})}),e.jsx(Va,{value:a.contactId,setValue:m=>l("contactId",m),inputClass:p(),buttonStyle:{marginTop:"9px",paddingLeft:"10px"},placeholder:t.digite_numero_whatsapp,preferredCountries:["in","br","ar","us","id","mx","ru","pk","ng"],enableSearch:!0,searchPlaceholder:t.buscar_pais,searchNotFound:t.pais_nao_encontrado,inputProps:{name:"whatsapp",required:!0,autoFocus:!0}}),e.jsx(Us,{})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text font-medium",children:t.nome})}),e.jsx("input",{type:"text",value:a.name,onChange:m=>l("name",m.target.value),placeholder:"João",className:"input input-bordered focus:input-neutral",required:!0})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text font-medium",children:t.sobrenome})}),e.jsx("input",{type:"text",value:a.surname,onChange:m=>l("surname",m.target.value),placeholder:"Silva",className:"input input-bordered focus:input-neutral"})]})]}),e.jsx("div",{className:"form-control",children:e.jsxs("label",{className:"label cursor-pointer justify-start gap-3",children:[e.jsx("input",{type:"checkbox",checked:a.syncAdressBook,onChange:m=>l("syncAdressBook",m.target.checked),className:"checkbox checkbox-neutral checkbox-sm"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"label-text font-medium",children:t.sincronizar_google_contatos}),e.jsx("span",{className:"text-xs text-base-content/60 mt-1",children:a.syncAdressBook?t.contato_salvo_whatsapp_google:t.contato_salvo_apenas_whatsapp})]})]})}),e.jsx(Hs,{})]})},Zs=()=>e.jsxs("div",{className:"min-w-[450px] bg-base-100 p-3",children:[e.jsx(Qs,{}),e.jsx(Xs,{})]}),Qs=()=>{const t=h(a=>a.language);return e.jsxs("div",{className:"flex flex-col items-center mb-2",children:[e.jsx("div",{className:"avatar placeholder mb-2",children:e.jsx("div",{className:"bg-neutral text-neutral-content rounded-full w-14 h-14",children:e.jsx(_a,{className:"w-7 h-7"})})}),e.jsx(ut,{children:t.adicionar_novo_contato}),e.jsxs("p",{className:"text-base-content/70 text-center mt-2 text-base leading-relaxed max-w-sm",children:[t.crie_contato_adicione," ",e.jsx("span",{className:"text-[var(--primary-strong)] font-semibold",children:t.automaticamente})," ",t.a_lista]})]})},en=()=>{const t=h(u=>u.language),[a,s]=Y.useState(!1),n=Y.useRef(null),r=j(u=>u.currentCampaignId),l=j(u=>u.campaigns).find(u=>u.id===r),{open:d,close:p}=za.getState(),m=(l==null?void 0:l.selectedContacts)||[],{addGroupment:c}=Ne.getState(),x=u=>{u.preventDefault();const w=new FormData(u.currentTarget).get("groupmentName");if(!(w!=null&&w.trim()))return;const f={id:ot(),name:w.trim(),contacts:[...m]};c(f),z({type:"Success",message:t.agrupamento_criado_sucesso}),n.current&&n.current.reset(),s(!1)},b=()=>{s(!1),n.current&&n.current.reset()},g=()=>_("h-full px-1 2xl:px-2 rounded-md bg-[var(--addContact-btn-bg-color)] hover:bg-[var(--addContact-btn-hover-bg)]","text-black transition-all duration-150 gap-1 hover:scale-[1.02] active:scale-95 active:opacity-80","border border-solid border-[var(--eem-border-primary)] flex items-center justify-center"),o=u=>{d(t.salve_contatos_agrupamento,{placement:"top"},u.currentTarget)};return m.length===0?null:e.jsx("div",{className:"w-full h-6 2xl:h-8 text-xs 2xl:text-base font-medium",children:a?e.jsxs("form",{className:"w-full h-full flex items-center gap-1",onSubmit:x,ref:n,children:[e.jsx("input",{type:"text",name:"groupmentName",className:`flex-1 px-1.5 2xl:px-2.5 h-full rounded-md border border-solid border-[var(--eem-border-primary)]
              placeholder:!text-xs 2xl:placeholder:!text-base`,placeholder:t.insira_nome_agrupamento,autoFocus:!0}),e.jsx("button",{type:"submit",title:t.criar_agrupamento,className:`${g()} w-fit flex items-center justify-center`,children:e.jsx(_t,{fontWeight:800,className:"text-black text-inherit"})}),e.jsx("button",{type:"button",title:t.cancelar_criacao,onClick:b,className:`${g()} w-fit flex items-center justify-center`,children:e.jsx(yt,{fontWeight:800,className:"text-red-600 text-inherit"})})]}):e.jsxs("button",{type:"button",className:`${g()} w-full`,onClick:()=>s(!0),children:[e.jsx("span",{children:t.criar_agrupamento}),e.jsx("span",{onMouseEnter:o,onMouseLeave:p,onClick:p,children:e.jsx(ya,{})})]})})},tn=()=>{const t=h(o=>o.language),a=j(o=>o.currentCampaignId),s=j(o=>o.campaigns),{updateCampaign:n}=j.getState(),{open:r}=E.getState(),i=s.find(o=>o.id===a),l=(i==null?void 0:i.selectedContacts)||[],d=()=>{i&&n(i.id,{selectedContacts:[]})},{breakpoint:p}=B(),m={estimateSize:p==="2xl"?37:29,gap:p==="2xl"?8:6,padding:p==="2xl"?8:6},c=Y.useRef(null),x=Oe({count:l.length,getScrollElement:()=>c.current,estimateSize:()=>m.estimateSize,paddingStart:m.padding,paddingEnd:m.padding,gap:m.gap,overscan:10}),b=x.getTotalSize(),g=x.getVirtualItems();return e.jsxs("div",{className:"flex flex-col items-center bg-[var(--eem-bg-secondary)] p-2 rounded-md h-fit",children:[e.jsxs("div",{className:"flex items-center justify-between w-full mb-1 2xl:mb-2",children:[e.jsx("h2",{className:"text-xs xl:text-base 2xl:text-lg",children:t.destinatarios_selecionados}),e.jsxs("button",{className:`w-fit px-0.5 2xl:px-2 flex items-center justify-center rounded-md 
          bg-[var(--addContact-btn-bg-color)] hover:bg-[var(--addContact-btn-hover-bg)] 
        text-black transition-all duration-150 gap-0.5 2xl:gap-1 text-xs xl:text-base 2xl:text-lg
          hover:scale-[1.02] active:scale-95 active:opacity-80
          border border-solid border-[var(--eem-border-primary)]`,onClick:()=>r(e.jsx(Zs,{})),children:[e.jsx(Na,{className:"text-black"}),e.jsx("span",{className:"font-medium",children:t.adicionar_contato})]})]}),e.jsxs("div",{className:"flex items-center justify-between w-full mb-0.5 text-xs xl:text-base 2xl:text-lg",children:[e.jsx("p",{className:"text-[var(--light-text-color)]",children:`${l.length} ${Ca(l.length,t.destinatario,t.destinatarios)}`}),e.jsxs("button",{title:t.limpar_tudo,className:`flex items-center gap-0.5 2xl:gap-1 hover:bg-[var(--view-btn-inactive-bg)]
          hover:scale-[1.04] active:scale-90 active:opacity-80 p-1 2xl:p-1.5 transition-all duration-200 rounded-md`,onClick:()=>l.length>0&&d(),children:[e.jsx(Me,{}),e.jsx("span",{className:"font-medium",children:t.limpar})]})]}),e.jsx("div",{className:"w-full overflow-auto max-h-[36dvh] px-1",ref:c,children:e.jsx("div",{style:{height:b,position:"relative"},children:g.map(o=>{const u=l[o.index];return u?e.jsx(qs,{selectedContact:u,virtualItem:o},o.key):null})})}),e.jsx("hr",{className:"w-full my-1.5 2xl:my-3 border-1 border-solid border-[var(--eem-border-primary)]"}),e.jsx(en,{})]})},an=()=>{const t=h(a=>a.language);return e.jsxs(e.Fragment,{children:[e.jsx(Se,{title:t.step_contacts_titulo,subtitle:t.step_contacts_subtitulo}),e.jsxs("div",{className:"grid grid-cols-[29%_minmax(300px,1fr)_28%] gap-2 2xl:gap-4",children:[e.jsx(_s,{}),e.jsx(Vs,{}),e.jsx(tn,{})]})]})},X=({label:t,value:a,className:s=""})=>e.jsxs("div",{className:_("flex justify-between text-xs",s),children:[e.jsx("span",{children:t}),e.jsx("span",{className:"font-medium",children:a})]}),st=t=>t.toLocaleDateString(void 0,{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}),sn=(t,a)=>{const s=new Date(a).getTime()-new Date(t).getTime(),n=Math.floor(s/6e4),r=Math.floor(s%6e4/1e3);return n>0?`${n}m ${r}s`:`${r}s`},nn=()=>{const t=h(i=>i.language),a=j(i=>i.currentCampaignId),{execution:s}=te(a);if((s==null?void 0:s.status)!==Da.COMPLETED)return e.jsx("div",{className:"text-center py-8",children:t.resultados_disponiveis_apos_conclusao});const n=({value:i,label:l})=>e.jsxs("div",{className:"bg-[var(--result-card-bg-color)] h-full flex-1 flex flex-col items-center justify-center rounded-md",children:[e.jsx("h2",{className:"text-[30px] 2xl:text-[40px] text-[var(--primaria)] font-semibold",children:i}),e.jsx("p",{className:"text-[var(--light-text-color)] text-sm 2xl:text-base",children:l})]}),r=s.totalContacts*s.totalActions;return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-2",children:[e.jsx("div",{className:"size-12 2xl:size-16 bg-[#d2fecc] rounded-full flex items-center justify-center",children:e.jsx(wa,{className:"text-green-600 text-[30px] 2xl:text-[40px]"})}),e.jsx("h1",{className:"text-lg 2xl:text-2xl font-medium leading-none",children:t.acoes_executadas_sucesso}),e.jsx("p",{className:"text-sm 2xl:text-lg text-[var(--light-text-color)]",children:t.todas_acoes_executadas}),e.jsxs("div",{className:`w-full border border-solid border-[var(--sidebar-line-color)] 
        rounded-md p-2 2xl:p-3 space-y-6 2xl:space-y-12 mt-3 2xl:mt-6`,children:[e.jsxs("div",{className:"flex items-center gap-1.5 2xl:gap-2 text-sm 2xl:text-lg font-medium",children:[e.jsx(Sa,{className:"text-base 2xl:text-2xl"}),e.jsx("span",{children:t.resumo_execucao})]}),e.jsxs("div",{className:"flex gap-2 h-32",children:[e.jsx(n,{value:s.totalContacts,label:t.contatos_alcancados}),e.jsx(n,{value:r,label:t.total_acoes_enviadas}),e.jsx(n,{value:s.failedCount,label:t.erros_no_envio})]}),e.jsxs("div",{className:"space-y-0.5 2xl:space-y-1",children:[e.jsx(X,{label:t.detalhes,value:"",className:"font-bold"}),e.jsx(X,{label:t.iniciado_em,value:st(s.startedAt)}),e.jsx(X,{label:t.concluido_em,value:st(s.completedAt)}),e.jsx(X,{label:t.tempo_total,value:sn(s.startedAt,s.completedAt)})]})]})]})})},Be=t=>{const a=h.getState().language;return{txt:{title:a.action_txt_title,description:a.action_txt_desc,icon:null},image:{title:a.action_image_title,description:a.action_image_desc,icon:null},video:{title:a.action_video_title,description:a.action_video_desc,icon:null},audio:{title:a.action_audio_title,description:a.action_audio_desc,icon:null},doc:{title:a.action_doc_title,description:a.action_doc_desc,icon:null},respostaRapida:{title:a.action_respostaRapida_title,description:a.action_respostaRapida_desc,icon:null},addCRM:{title:a.action_addCRM_title,description:a.action_addCRM_desc,icon:null},removeCRM:{title:a.action_removeCRM_title,description:a.action_removeCRM_desc,icon:null},removeAllCRM:{title:a.action_removeAllCRM_title,description:a.action_removeAllCRM_desc,icon:null},addLabel:{title:a.action_addLabel_title,description:a.action_addLabel_desc,icon:null},removeLabel:{title:a.action_removeLabel_title,description:a.action_removeLabel_desc,icon:null},removeAllLabel:{title:a.action_removeAllLabel_title,description:a.action_removeAllLabel_desc,icon:null},timer:{title:a.action_timer_title,description:a.action_timer_desc,icon:null},composing:{title:a.action_composing_title,description:a.action_composing_desc,icon:null},recording:{title:a.action_recording_title,description:a.action_recording_desc,icon:null},arquivar:{title:a.action_arquivar_title,description:a.action_arquivar_desc,icon:null},desarquivar:{title:a.action_desarquivar_title,description:a.action_desarquivar_desc,icon:null},fixarChat:{title:a.action_fixarChat_title,description:a.action_fixarChat_desc,icon:null},desfixarChat:{title:a.action_desfixarChat_title,description:a.action_desfixarChat_desc,icon:null},marcarNaoLido:{title:a.action_marcarNaoLido_title,description:a.action_marcarNaoLido_desc,icon:null},transferir:{title:a.action_transferir_title,description:a.action_transferir_desc,icon:null},bloquear:{title:a.action_bloquear_title,description:a.action_bloquear_desc,icon:null},pix:{title:a.action_pix_title,description:a.action_pix_desc,icon:null},groupInvite:{title:a.action_groupInvite_title,description:a.action_groupInvite_desc,icon:null},contact:{title:a.action_contact_title,description:a.action_contact_desc,icon:null},linkPreview:{title:a.action_linkPreview_title,description:a.action_linkPreview_desc,icon:null},sticker:{title:a.action_sticker_title,description:a.action_sticker_desc,icon:null},list:{title:a.action_list_title,description:a.action_list_desc,icon:null}}[t]},rn=()=>{var pe,ge,be;const t=h(se=>se.language),[a,s]=C.useState(null);C.useEffect(()=>{async function se(){const Ft=await ht();s(Ft)}se()},[]);const n=j(se=>se.currentCampaignId),{execution:r,isLoading:i,actions:l,isRunning:d,isPaused:p,isCompleted:m,isCancelled:c,campaign:x}=te(n),{clearExecution:b}=bt.getState(),g=()=>{b(n),(r==null?void 0:r.type)==="test"?l.sendTest():l.sendFull()};if(!x)return e.jsx("div",{className:"text-center py-8",children:t.nenhuma_campanha_selecionada});const{breakpoint:o}=B(),u=r?r.currentContactIndex/r.totalContacts*100:0,y=(r==null?void 0:r.type)==="test"?a?[a]:[]:x.selectedContacts,w=r&&r.currentContactIndex<y.length?y[r.currentContactIndex]:null,f=(r==null?void 0:r.currentActionIndex)??0,A=x.actions[f],M=x.actions.length>0?(f+1)/x.actions.length*100:0,F=A?Be(A.type):null,v=r&&((pe=x.config.pause)==null?void 0:pe.every)>0?x.config.pause.every-r.currentContactIndex%x.config.pause.every:null,$=p&&(r==null?void 0:r.isAutoPause)===!0;return(r==null?void 0:r.type)==="test"&&!a?e.jsx("div",{className:"flex-1 flex flex-col rounded-md border border-solid overflow-hidden bg-[var(--eem-bg-primary)] border-[var(--eem-border-primary)] min-h-0",children:e.jsx("div",{className:"px-4 py-3 border-b border-solid border-[var(--eem-border-primary)] bg-[var(--sidebar-bg-primary)]",children:e.jsx("h3",{className:"font-semibold text-sm",children:t.carregando_contatos})})}):e.jsxs("div",{className:"flex-1 flex flex-col rounded-md border border-solid overflow-hidden bg-[var(--eem-bg-primary)] border-[var(--eem-border-primary)] min-h-0",children:[r&&e.jsxs("div",{className:"flex-shrink-0 px-3 2xl:px-6 py-2 2xl:py-4 border-b border-solid border-[var(--eem-border-primary)] bg-[var(--sidebar-bg-primary)]",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"font-semibold text-xs 2xl:text-sm",children:t.progresso}),e.jsxs("span",{className:"text-xs font-medium opacity-70",children:[r.currentContactIndex," / ",r.totalContacts]})]}),e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("span",{className:"text-xs font-bold",children:[u.toFixed(0),"%"]})}),e.jsx("progress",{className:`progress w-full h-2 ${m?"progress-success":c?"progress-error":p?"progress-warning":"progress-primary"}`,value:r.currentContactIndex,max:r.totalContacts})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto min-h-0",children:[r&&e.jsxs("div",{className:"grid grid-cols-3 divide-x divide-solid border-b border-solid border-[var(--eem-border-primary)] divide-[var(--eem-border-primary)]",children:[e.jsxs("div",{className:"px-2 2xl:px-4 py-1.5 2xl:py-3 text-center",children:[e.jsx("div",{className:"text-sm 2xl:text-2xl font-bold mb-0.5",children:r.currentContactIndex}),e.jsx("div",{className:"text-xs uppercase tracking-wide opacity-60",children:t.contatos_processados})]}),e.jsxs("div",{className:"px-2 2xl:px-4 py-1.5 2xl:py-3 text-center",children:[e.jsxs("div",{className:"text-sm 2xl:text-2xl font-bold text-success flex items-center justify-center gap-0.5 2xl:gap-1.5 mb-0.5",children:[e.jsx(_e,{size:o==="2xl"?20:14}),r.successCount]}),e.jsx("div",{className:"text-xs uppercase tracking-wide opacity-60",children:t.contatos_enviados})]}),e.jsxs("div",{className:"px-2 2xl:px-4 py-1.5 2xl:py-3 text-center",children:[e.jsxs("div",{className:"text-sm 2xl:text-2xl font-bold text-error flex items-center justify-center gap-0.5 2xl:gap-1.5 mb-0.5",children:[e.jsx(pt,{size:o==="2xl"?20:14}),r.failedCount]}),e.jsx("div",{className:"text-xs uppercase tracking-wide opacity-60",children:t.falhas})]})]}),e.jsxs("div",{className:"px-2 2xl:px-4 py-1.5 2xl:py-3 border-b border-solid bg-[var(--eem-bg-primary)] border-[var(--eem-border-primary)]",children:[e.jsx("h3",{className:"font-semibold text-xs 2xl:text-sm mb-1 2xl:mb-2",children:t.configuracoes_de_envio}),e.jsxs("div",{className:"grid grid-cols-2 gap-1.5 2xl:gap-3 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-1 2xl:gap-2",children:[e.jsx(gt,{className:"text-primary flex-shrink-0",size:o==="2xl"?16:12}),e.jsx("div",{children:e.jsxs("div",{className:"font-medium",children:[t.intervalo_entre_contatos," ",((ge=x.config.interval)==null?void 0:ge.seconds)||0,"s"]})})]}),(((be=x.config.pause)==null?void 0:be.every)||0)>0&&e.jsxs("div",{className:"flex items-center gap-1 2xl:gap-2",children:[e.jsx(je,{className:"text-warning flex-shrink-0",size:o==="2xl"?16:12}),e.jsx("div",{children:e.jsxs("div",{className:"font-medium",children:[t.pausa_auto_a_cada," ",x.config.pause.every," ",t.contato," • ",x.config.pause.durationSeconds,"s"]})})]}),d&&v&&e.jsx("div",{className:"col-span-2 mt-1 p-2 bg-warning/10 rounded-md",children:e.jsxs("div",{className:"text-warning font-medium",children:[t.proxima_pausa_auto_em," ",v," ",t.contato,"(s)"]})})]})]}),d&&F&&e.jsxs("div",{className:"px-2 2xl:px-4 py-1.5 2xl:py-3 border-b border-solid bg-[var(--sidebar-bg-primary)] border-[var(--eem-border-primary)]",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1 2xl:mb-2",children:[e.jsx("h3",{className:"font-semibold text-xs 2xl:text-sm",children:t.acao_atual}),e.jsxs("span",{className:"text-xs font-medium opacity-70",children:[f+1," / ",x.actions.length]})]}),e.jsxs("div",{className:"flex items-center gap-1.5 2xl:gap-3 mb-1 2xl:mb-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium text-xs 2xl:text-sm",children:F.title}),e.jsx("div",{className:"text-xs opacity-70",children:F.description})]}),e.jsx("div",{className:"loading loading-spinner loading-xs 2xl:loading-sm text-primary flex-shrink-0"})]}),e.jsx("progress",{className:"progress progress-primary w-full h-1.5",value:f+1,max:x.actions.length}),e.jsxs("div",{className:"text-xs text-right mt-0.5 2xl:mt-1 opacity-70",children:[M.toFixed(0),"%"]})]}),d&&w&&e.jsx("div",{className:"px-2 2xl:px-4 py-1.5 2xl:py-3 border-b border-solid bg-[var(--sidebar-bg-primary)] border-[var(--eem-border-primary)]",children:e.jsxs("div",{className:"flex items-center gap-1.5 2xl:gap-3",children:[e.jsx("div",{className:"loading loading-spinner loading-xs 2xl:loading-sm text-primary"}),e.jsx(ue,{contact:w,size:o==="2xl"?"sm":"xs"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-semibold text-xs 2xl:text-sm truncate",children:w.name}),e.jsx("div",{className:"text-xs opacity-70 truncate",children:w.phone})]})]})})]}),e.jsx("div",{className:"flex-shrink-0 px-3 2xl:px-6 py-2 2xl:py-4 bg-[var(--eem-bg-primary)]",children:e.jsxs("div",{className:"flex gap-1 2xl:gap-2 justify-center flex-wrap",children:[!r&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:l.sendTest,disabled:i,className:"py-1 px-1.5 flex gap-1 bg-transparent border border-solid hover:opacity-80 rounded-md items-center disabled:opacity-50",children:[e.jsx(qa,{size:16,className:"flex-shrink-0"}),e.jsx("span",{className:"hidden sm:inline whitespace-nowrap",children:t.enviar_teste})]}),e.jsxs("button",{onClick:l.sendFull,disabled:i||y.length===0,className:"py-1 px-1.5 flex gap-1 bg-transparent border border-solid hover:opacity-80 rounded-md items-center disabled:opacity-50",children:[i?e.jsx(Xe,{size:16,className:"flex-shrink-0 animate-spin"}):e.jsx(Ua,{size:16,className:"flex-shrink-0"}),e.jsx("span",{className:"whitespace-nowrap",children:t.iniciar_campanha})]})]}),d&&!$&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:l.pause,className:"py-1 px-1.5 flex gap-1 bg-transparent border border-solid hover:opacity-80 rounded-md items-center disabled:opacity-50",children:[e.jsx(Ha,{size:16,className:"flex-shrink-0"}),e.jsx("span",{className:"whitespace-nowrap",children:t.pausar})]}),e.jsxs("button",{onClick:l.cancel,className:"py-1 px-1.5 flex gap-1 bg-transparent border border-solid hover:opacity-80 rounded-md items-center disabled:opacity-50",children:[e.jsx(Ze,{size:16,className:"flex-shrink-0"}),e.jsx("span",{className:"whitespace-nowrap",children:t.cancelar})]})]}),p&&!$&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:l.resume,disabled:i,className:"py-1 px-1.5 flex gap-1 bg-transparent border border-solid hover:opacity-80 rounded-md items-center disabled:opacity-50",children:[i?e.jsx(Xe,{size:16,className:"flex-shrink-0 animate-spin"}):e.jsx(Wa,{size:16,className:"flex-shrink-0"}),e.jsx("span",{className:"whitespace-nowrap",children:t.continuar})]}),e.jsxs("button",{onClick:l.cancel,disabled:i,className:"py-1 px-1.5 flex gap-1 bg-transparent border border-solid hover:opacity-80 rounded-md items-center disabled:opacity-50",children:[e.jsx(Ze,{size:16,className:"flex-shrink-0"}),e.jsx("span",{className:"whitespace-nowrap",children:t.cancelar})]})]}),(m||c)&&e.jsxs("button",{onClick:g,className:"py-1 px-1.5 flex gap-1 bg-transparent border border-solid hover:opacity-80 rounded-md items-center",children:[e.jsx(Ka,{size:16,className:"flex-shrink-0"}),e.jsx("span",{className:"whitespace-nowrap",children:t.enviar_novamente})]})]})})]})},ln=()=>{const t=h(x=>x.language),a=j(x=>x.currentCampaignId),{campaign:s,execution:n,isRunning:r}=te(a),[i,l]=C.useState(null),d=C.useRef(null),{breakpoint:p}=B();C.useEffect(()=>{async function x(){const b=await ht();l(b)}x()},[n]);const m=(n==null?void 0:n.type)==="test"?i?[i]:[]:s.selectedContacts,c=Oe({count:m.length,getScrollElement:()=>d.current,estimateSize:()=>60,overscan:5,gap:8,paddingEnd:8,paddingStart:8});return(n==null?void 0:n.type)==="test"&&!i?e.jsx("div",{className:"w-80 flex flex-col rounded-md border border-solid overflow-hidden bg-[var(--eem-bg-primary)] border-[var(--eem-border-primary)] min-h-0",children:e.jsx("div",{className:"flex-shrink-0 px-4 py-3 border-b border-solid border-[var(--eem-border-primary)] bg-[var(--sidebar-bg-primary)]",children:e.jsx("h3",{className:"font-semibold text-sm",children:t.carregando_contatos})})}):e.jsxs("div",{className:"w-80 flex flex-col rounded-md border border-solid overflow-hidden bg-[var(--eem-bg-primary)] border-[var(--eem-border-primary)] min-h-0",children:[e.jsx("div",{className:"flex-shrink-0 px-4 py-3 border-b border-solid border-[var(--eem-border-primary)] bg-[var(--sidebar-bg-primary)]",children:e.jsxs("h3",{className:"font-semibold text-sm flex items-center gap-2",children:[e.jsx("span",{children:t.contatos}),e.jsx("span",{className:"badge badge-neutral badge-xs",children:m.length})]})}),e.jsx("div",{ref:d,className:"flex-1 overflow-y-auto p-2 min-h-0",children:e.jsx("div",{style:{height:`${c.getTotalSize()}px`,width:"100%",position:"relative"},children:c.getVirtualItems().map(x=>{const b=m[x.index],g=x.index<n.currentContactIndex,o=x.index===n.currentContactIndex&&r;return e.jsxs("div",{"data-index":x.index,ref:c.measureElement,className:`flex items-center gap-2.5 px-3 py-2 rounded-md transition-all mb-1.5 ${o?"bg-primary/10 ring-1 ring-primary":g?"bg-success/10":"opacity-50 bg-[var(--sidebar-bg-primary)]"}`,style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${x.start}px)`},children:[e.jsx(ue,{contact:b,size:p==="2xl"?"sm":"xs"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium text-xs 2xl:text-sm truncate",children:b.name}),e.jsx("div",{className:"text-xs opacity-70 truncate",children:b.phone})]}),e.jsxs("div",{className:"flex-shrink-0",children:[g&&e.jsx(_e,{className:"text-success",size:18}),o&&e.jsx("span",{className:"loading loading-spinner loading-xs text-primary"})]})]},x.key)})})})]})},on=()=>{const t=h(w=>w.language),a=j(w=>w.currentCampaignId),{execution:s,isRunning:n,isPaused:r,isCompleted:i,isCancelled:l,campaign:d}=te(a);if(!d)return e.jsx("div",{className:"text-center py-8",children:t.nenhuma_campanha_selecionada});const p=s&&s.currentContactIndex<d.selectedContacts.length?d.selectedContacts[s.currentContactIndex]:null,m=(s==null?void 0:s.currentActionIndex)??0,c=d.actions[m],x=c?Be(c.type):null,b=r&&(s==null?void 0:s.isAutoPause)===!0,g={idle:{title:t.pronto_para_enviar,subtitle:t.inicie_envio_ou_teste},running:{title:t.enviando_mensagens,subtitle:p?`${t.enviando_para} ${p.name}`:t.processando},paused:{title:t.campanha_pausada,subtitle:t.continue_de_onde_parou},completed:{title:t.envio_concluido,subtitle:t.todas_mensagens_processadas},cancelled:{title:t.envio_cancelado,subtitle:t.envio_foi_interrompido}},o=s?n?"running":r?"paused":i?"completed":"cancelled":"idle",{title:u,subtitle:y}=g[o];return e.jsxs(e.Fragment,{children:[e.jsx(Se,{title:u,subtitle:y}),e.jsxs("div",{className:"flex flex-col gap-2 border border-solid border-[var(--sidebar-line-color)] rounded-md p-2 2xl:p-4",children:[e.jsxs("div",{className:"h-[64vh] flex gap-2",children:[e.jsx(rn,{}),s&&d.selectedContacts.length>0&&e.jsx(ln,{})]}),!s&&e.jsxs("div",{className:"alert alert-info py-1.5 2xl:py-2.5 text-xs 2xl:text-sm !rounded-md",children:[e.jsx(_e,{size:18}),e.jsxs("span",{children:[e.jsx("strong",{children:t.dicas})," ",t.dicas_teste_pausa]})]}),b&&e.jsxs("div",{className:"alert alert-warning py-1.5 2xl:py-2.5 text-xs 2xl:text-sm !rounded-md",children:[e.jsx(gt,{size:18,className:"animate-pulse"}),e.jsx("div",{className:"flex flex-col",children:e.jsxs("span",{children:[e.jsx(je,{size:14,className:"inline mb-0.5"})," ",e.jsx("strong",{children:t.pausa_automatica})," •",t.processados," ",e.jsx("strong",{children:s==null?void 0:s.currentContactIndex})," ",t.de," ",e.jsx("strong",{children:s==null?void 0:s.totalContacts})," ",t.contatos]})})]}),r&&!b&&e.jsxs("div",{className:"alert alert-warning py-1.5 2xl:py-2.5 text-xs 2xl:text-sm !rounded-md",children:[e.jsx(je,{size:18}),e.jsxs("span",{children:[e.jsx(je,{size:14,className:"inline mb-0.5"})," ",e.jsx("strong",{children:t.pausado_manualmente})," •",t.contato," ",e.jsx("strong",{children:(s==null?void 0:s.currentContactIndex)+1})," ",t.de," ",e.jsx("strong",{children:s==null?void 0:s.totalContacts}),x&&` • ${t.acao}: ${x.title} (${(s==null?void 0:s.currentActionIndex)+1}/${d.actions.length})`]})]}),i&&e.jsxs("div",{className:"alert alert-success py-1.5 2xl:py-2.5 text-xs 2xl:text-sm !rounded-md",children:[e.jsx(_e,{size:18}),e.jsx("span",{children:e.jsx("strong",{children:t.envio_concluido_alert})})]}),l&&e.jsxs("div",{className:"alert alert-error py-1.5 2xl:py-2.5 text-xs 2xl:text-sm !rounded-md",children:[e.jsx(pt,{size:18}),e.jsx("span",{children:e.jsx("strong",{children:t.envio_cancelado_alert})})]})]})]})},cn=({action:t,index:a})=>{const s=Be(t.type),n=s.icon;return e.jsxs("div",{className:"flex bg-[var(--contact-card-bg)] rounded-md items-center gap-2 2xl:gap-3 p-1.5 2xl:p-3 border-[var(--sidebar-line-color)] border border-solid",children:[e.jsx("div",{className:"size-5 2xl:size-6 bg-[var(--terciaria)] rounded-full flex items-center justify-center text-[var(--primaria)] font-semibold text-xs",children:a+1}),s.icon&&e.jsx("div",{className:"size-6 2xl:size-8 flex items-center justify-center",children:e.jsx(n,{size:16})}),e.jsxs("div",{className:"flex-1",children:[s.title&&e.jsx("div",{className:"font-semibold text-xs 2xl:text-sm",children:s.title}),s.description&&e.jsx("div",{className:"text-xs",children:s.description})]})]})},At=({onClick:t})=>{const a=h(i=>i.language),s=j(i=>i.campaigns.find(l=>l.id===i.currentCampaignId)),n=s.status===S.SENDING||s.status===S.PAUSED,r=()=>{n||t()};return e.jsxs("button",{onClick:r,disabled:n,className:`ml-auto text-blue-600 hover:text-blue-700 active:scale-[0.98] hover:scale-[1.02] text-xs 2xl:text-sm font-medium
     flex items-center gap-1 disabled:opacity-50 disabled:cursor-not-allowed transition-all`,children:[e.jsx(ka,{className:"text-base 2xl:text-2xl"}),a.editar]})},dn=()=>{const t=h(b=>b.language),a=j(b=>b.campaigns.find(g=>g.id===b.currentCampaignId)),{setCurrentStep:s}=D.getState(),{ref:n,onMouseDown:r}=Nt(),{actions:i}=a,{interval:l,pause:d}=a.config,{durationSeconds:p,every:m}=d,c=i.length===0?0:(i.length-1)*l.seconds+Math.floor(i.length/m)*p,x=`${Math.floor(c/60)}m ${c%60}s`;return e.jsxs("div",{className:"h-full flex-1 flex flex-col p-3 2xl:p-4 border border-[var(--sidebar-line-color)] border-solid rounded-md",children:[e.jsxs("div",{className:"flex items-center gap-1 2xl:gap-2 mb-2 2xl:mb-4",children:[e.jsx(ct,{className:"text-base 2xl:text-2xl"}),e.jsx("h2",{className:"text-sm 2xl:text-base font-medium",children:t.sequencia_acoes}),e.jsx(At,{onClick:()=>s("acoes")})]}),e.jsx("div",{ref:n,className:"flex flex-col gap-1 2xl:gap-2 mb-2 2xl:mb-4 pb-0.5 2xl:pb-1 pr-1 overflow-y-auto flex-1 min-h-0 select-none",onMouseDown:r,style:{WebkitOverflowScrolling:"touch"},children:i.map((b,g)=>e.jsx("div",{children:e.jsx(cn,{action:b,index:g},b.id)}))}),e.jsxs("div",{className:"mt-auto border-t border-solid border-[var(--sidebar-line-color)] pt-1.5 2xl:pt-3 space-y-0.5 2xl:space-y-1 w-full",children:[e.jsx(X,{label:t.total_de_acoes,value:i.length}),e.jsx(X,{label:t.tempo_estimado,value:`~${x}`})]})]})},mn=50,xn=()=>{const t=h(g=>g.language),a=j(g=>g.campaigns.find(o=>o.id===g.currentCampaignId)),s=P(g=>g.contacts),{setCurrentStep:n}=D.getState(),{ref:r,onMouseDown:i}=Nt(),{selectedContacts:l}=a,d=l.slice(0,mn),p=Math.max(0,l.length-d.length),{breakpoint:m}=B(),c=m==="2xl"?"sm":"xs",b=!ft(g=>g.user.estado);return e.jsxs("div",{className:"h-full flex flex-col p-3 2xl:p-4 border border-[var(--sidebar-line-color)] border-solid rounded-md",children:[e.jsxs("div",{className:"flex items-center gap-1 2xl:gap-2 mb-2 2xl:mb-4",children:[e.jsx(xt,{className:"text-base 2xl:text-2xl"}),e.jsx("h2",{className:"text-sm 2xl:text-base font-medium capitalize",children:t.destinatarios}),e.jsx(At,{onClick:()=>n("contatos")})]}),e.jsxs("div",{className:"mb-2 2xl:mb-4",children:[e.jsxs("div",{className:"text-xs 2xl:text-sm font-medium",children:[l.length," ",t.contatos_selecionados]}),e.jsxs("div",{className:"text-xs",children:[t.de_um_total_de," ",s.length," ",t.contatos]})]}),e.jsxs("div",{ref:r,className:`grid 2xl:grid-cols-4 xl:grid-cols-3 lg:grid-cols-2 grid-cols-1 auto-rows-[2rem] 2xl:auto-rows-[2.8rem] 
        gap-1 2xl:gap-2 mb-2 2xl:mb-4 pb-0.5 2xl:pb-1 pr-1 overflow-y-auto flex-1 min-h-0 select-none`,onMouseDown:i,style:{WebkitOverflowScrolling:"touch"},children:[d.map((g,o)=>e.jsxs("div",{className:_("flex items-center justify-start gap-1 2xl:gap-2 h-full flex-none p-0.5 2xl:p-1","bg-[var(--contact-card-bg)] border border-[var(--sidebar-line-color)] border-solid rounded-md",b&&o>=5&&"opacity-40"),title:g.name,children:[e.jsx(ue,{contact:g,size:c}),e.jsx("span",{className:"text-xs 2xl:text-sm font-semibold truncate flex-1",children:g.name})]},g.id)),p>0&&e.jsx("div",{className:`flex items-center justify-center gap-1 2xl:gap-2 h-full flex-none 
            p-1.5 2xl:p-2 border border-[var(--sidebar-line-color)] border-dashed rounded-md`,children:e.jsxs("span",{className:"text-xs 2xl:text-sm text-center font-semibold truncate flex-1",children:["+",p]})},"extra-count")]})]})},un=()=>{const t=h(n=>n.language),a=j(n=>n.campaigns.find(r=>r.id===n.currentCampaignId)),{actions:s}=te(a.id);return e.jsxs("div",{className:"col-span-1 flex flex-col p-3 2xl:p-4 bg-amber-100 border border-yellow-300 border-solid rounded-md",children:[e.jsxs("div",{className:"flex gap-1 2xl:gap-2 items-center",children:[e.jsx(Ee,{className:"text-yellow-600 text-base 2xl:text-2xl"}),e.jsx("h2",{className:"text-sm 2xl:text-base font-medium text-yellow-600",children:t.importante})]}),e.jsx("p",{className:"text-xs 2xl:text-sm text-yellow-600 font-medium",children:t.warning_card_desc}),e.jsx("button",{className:`w-fit bg-white text-black text-xs 2xl:text-sm p-1 2xl:p-1.5 border border-solid border-gray-200
        rounded mt-1.5 2xl:mt-2 hover:bg-gray-100 hover:scale-[1.02] active:scale-[0.98] transition-all`,onClick:s.sendTest,children:t.executar_teste_para_mim})]})},pn=()=>{const t=h(r=>r.language),a=ft(r=>r.user.estado),s=vt(r=>r.label.checkout),n=!a;return e.jsxs("div",{className:"col-span-1 flex flex-col p-3 2xl:p-4 bg-blue-100 border border-blue-300 border-solid rounded-md",children:[e.jsxs("div",{className:"flex gap-1 2xl:gap-2 items-center",children:[e.jsx(Ee,{className:"text-blue-600 text-base 2xl:text-2xl"}),e.jsx("h2",{className:"text-sm 2xl:text-base font-medium text-blue-600",children:n?t.versao_gratuita:t.versao_premium})]}),n?e.jsx("p",{className:"text-xs 2xl:text-sm text-blue-600 font-medium",children:t.warning_user_free_desc}):e.jsx("p",{className:"text-xs 2xl:text-sm text-blue-600 font-medium",children:t.warning_user_premium_desc}),n&&e.jsx("a",{href:s,target:"_blank",rel:"noopener noreferrer",className:`w-fit bg-white text-black text-xs 2xl:text-sm p-1 2xl:p-1.5 border border-solid border-gray-200
          rounded mt-1.5 2xl:mt-2 hover:bg-gray-100 hover:scale-[1.02] active:scale-[0.98] transition-all`,children:t.atualizar_para_premium})]})},gn=()=>{const t=h(i=>i.language),s=j(i=>i.campaigns.find(l=>l.id===i.currentCampaignId)).status,n=s===S.SENDING||s===S.PAUSED,r=_("grid-rows-[clamp(360px,40dvh,497px)] auto-rows-[clamp(360px,40dvh,497px)]","lg:grid-rows-[clamp(250px,40dvh,497px)] lg:auto-rows-[clamp(250px,40dvh,497px)]","xl:grid-rows-[clamp(360px,44dvh,497px)] xl:auto-rows-[clamp(360px,44dvh,497px)]","2xl:grid-rows-[clamp(360px,45dvh,497px)] 2xl:auto-rows-[clamp(360px,45dvh,497px)]");return e.jsxs(e.Fragment,{children:[e.jsx(Se,{title:n?t.enviando_acoes:t.revise_confirme,subtitle:n?t.acoes_estao_sendo_executadas:t.verifique_os_detalhes}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-2 2xl:gap-4",children:[e.jsxs("div",{className:_("col-span-full grid grid-cols-1 lg:grid-cols-2 gap-2 2xl:gap-4",r),children:[e.jsx(dn,{}),e.jsx(xn,{})]}),e.jsxs("div",{className:_("col-span-full grid grid-cols-1 lg:grid-cols-2 gap-2 2xl:gap-4"),children:[e.jsx(un,{}),e.jsx(pn,{})]})]})]})},bn=()=>{const t=D(n=>n.currentStep),a={contatos:an,acoes:gs,revisao:gn,envio:on,resultados:nn},s=()=>{const n=a[t];return e.jsx(n,{})};return e.jsx("div",{className:"flex-1",children:s()})},nt=({onClick:t,disabled:a,children:s,variant:n="primary",className:r})=>e.jsx("button",{onClick:t,disabled:a,className:_("p-1.5 2xl:p-2.5 rounded-md transition-colors disabled:opacity-70 disabled:cursor-not-allowed","flex items-center justify-center gap-1 2xl:gap-1.5 text-xs 2xl:text-base font-semibold",n==="primary"?"bg-black text-white dark:bg-white dark:text-black":"border border-solid",r),children:s}),hn={contatos:t=>{var a;return(((a=t.selectedContacts)==null?void 0:a.length)||0)===0?{isValid:!1,message:h.getState().language.validate_selecione_destinatario}:{isValid:!0}},acoes:t=>{var a;return(((a=t.actions)==null?void 0:a.length)||0)===0?{isValid:!1,message:h.getState().language.validate_adicione_acao}:{isValid:!0}},revisao:()=>({isValid:!0}),envio:()=>({isValid:!0}),resultados:()=>({isValid:!0})};function fn(){const{campaigns:t,currentCampaignId:a}=j.getState(),s=t.find(r=>r.id===a);if(!s)return{isValid:!1,message:h.getState().language.validate_nenhuma_campanha};const n=D.getState().currentStep;return hn[n](s)}const vn=()=>{const t=h(l=>l.language),{close:a}=E.getState(),{close:s}=De.getState(),{setCurrentStep:n}=D.getState(),r=()=>{n("envio"),a()},i=()=>{a(),s()};return e.jsxs("div",{className:"flex flex-col gap-y-6 max-w-lg",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-[var(--primary-strong)] mb-2",children:t.envio_iniciado_sucesso}),e.jsx("p",{className:"text-[var(--light-text-color)] text-sm leading-relaxed",children:t.description_return_whats})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row-reverse gap-3 pt-2",children:[e.jsx("button",{onClick:r,className:_("flex-1 flex items-center justify-center gap-x-2 px-6 py-3 rounded-lg","font-medium transition-all duration-200","bg-gray-100 text-gray-900 hover:bg-gray-200","focus:outline-none focus:ring-1 focus:ring-offset-1 focus:ring-gray-400"),children:t.acompanhar_envio}),e.jsxs("button",{onClick:i,className:_("flex-1 flex items-center justify-center gap-x-2.5 px-6 py-3 rounded-lg","font-medium transition-all duration-200","bg-[#25D366] text-white hover:bg-[#128C7E]","focus:outline-none focus:ring-1 focus:ring-offset-1 focus:ring-[#25D366]"),children:[e.jsx(lt,{className:"w-5 h-5"}),t.voltar_ao_whats]})]})]})},jn=()=>{const t=h(x=>x.language),a=j(x=>x.campaigns.find(b=>b.id===x.currentCampaignId));if(!a)return null;const[s,n]=C.useState(!1),[r,i]=C.useState(!1),{close:l}=E.getState(),{actions:d}=te(a.id),p=async()=>{if(!s){i(!0);return}l(),d.sendFull(),E.getState().open(e.jsx(vn,{}),!1,void 0,!0)},m=()=>{l()},c=()=>{n(!s),r&&i(!1)};return e.jsxs("div",{className:"flex max-w-lg flex-col gap-y-5 font-sans",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-medium text-[var(--primary-strong)]",children:t.termos_de_uso}),e.jsx("button",{onClick:m,className:"text-2xl text-gray-500 hover:text-gray-800 transition-colors","aria-label":"Fechar modal",children:"×"})]}),e.jsxs("div",{className:"border-t border-solid border-[#E4E4E4] pt-4",children:[e.jsx("h3",{className:"font-semibold mb-2 text-[var(--primary-strong)]",children:t.termos_de_uso}),e.jsx("p",{className:"text-[var(--light-text-color)] leading-relaxed",children:t.warning_spam_desc})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-x-2 cursor-pointer text-gray-700",children:[e.jsx("input",{type:"checkbox",checked:s,onChange:c,className:"checkbox checkbox-sm checkbox-success","aria-describedby":"error-message"}),e.jsx("span",{className:"text-[var(--primary-strong)] font-semibold",children:t.eu_entendo_e_aceito})]}),r&&e.jsx("p",{id:"error-message",className:"text-red-600 text-sm mt-2",role:"alert",children:t.voce_precisa_aceitar_para_continuar})]}),e.jsxs("div",{className:"flex justify-end items-center gap-x-3 border-t border-[#E4E4E4] pt-4",children:[e.jsx("button",{onClick:m,className:`px-6 py-3 rounded-md bg-[#1d1d1d] text-white font-semibold
          transition-colors duration-150 hover:bg-[#141414]
          focus:outline-none focus:ring-2 focus:ring-gray-500`,children:t.cancelar}),e.jsx("button",{onClick:p,disabled:!s,className:_("px-8 py-3 rounded-md font-semibold transition-colors duration-150","focus:outline-none focus:ring-2 focus:ring-offset-2",s?"bg-[var(--primaria)] text-white hover:bg-[color-mix(in_srgb,var(--primaria)_85%,black_15%)] focus:ring-[var(--primaria)]":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:t.enviar})]})]})},_n=()=>{const t=h(m=>m.language),a=j(m=>m.campaigns.find(c=>c.id===m.currentCampaignId));if(!a)return{config:{},getConfig:()=>{}};const s=a.status,n=()=>s===S.DRAFT?t.step_config_executar_acoes:s===S.SENDING?t.step_config_enviando:t.step_config_executar_acoes,{setCurrentStep:r}=D.getState(),{clearExecution:i}=bt.getState(),l=()=>()=>{a&&(i(a.id),r("acoes"))},d={contatos:{nextLabel:t.step_config_proximo,nextIcon:e.jsx(Pe,{size:18}),previousLabel:t.step_config_voltar,previousIcon:e.jsx(he,{size:18})},acoes:{nextLabel:t.step_config_proximo,nextIcon:e.jsx(Pe,{size:18}),previousLabel:t.step_config_voltar,previousIcon:e.jsx(he,{size:18})},revisao:{nextLabel:n(),nextIcon:e.jsx(Aa,{size:18}),previousLabel:t.step_config_voltar,previousIcon:e.jsx(he,{size:18}),nextPersonalizedAction:()=>E.getState().open(e.jsx(jn,{}),!1,void 0,!0)},envio:{nextLabel:t.step_config_ver_resultados,previousLabel:t.step_config_voltar,previousIcon:e.jsx(he,{size:18}),nextIcon:e.jsx(Pe,{size:18})},resultados:{nextLabel:t.step_config_nova_sequencia,previousLabel:t.step_config_retornar_gerenciador,prevPersonalizedAction:()=>ae.getState().setActivePage("campaigns"),nextPersonalizedAction:l()}};return{config:d,getConfig:m=>d[m]}},yn=()=>{const a=j(u=>u.campaigns.find(y=>y.id===u.currentCampaignId)).status,{currentStep:s,steps:n,setCurrentStep:r}=D(Za(u=>({currentStep:u.currentStep,steps:u.steps,setCurrentStep:u.setCurrentStep}))),i=n.findIndex(u=>u.key===s),l=i===0,d=i===n.length-1,p=a===S.SENDING||a===S.PAUSED,{getConfig:m}=_n(),c=m(s),x=p?!0:l&&!c.prevPersonalizedAction,b=p?!0:d&&!c.nextPersonalizedAction,g=u=>{if(u==="next"&&c.nextPersonalizedAction){c.nextPersonalizedAction();return}if(u==="previous"&&c.prevPersonalizedAction){c.prevPersonalizedAction();return}o(u)},o=u=>{if(u==="next"&&!d){const y=fn();if(!y.isValid){z({type:"Error",message:y.message||"Erro ao validar etapa."});return}r(n[i+1].key)}else u==="previous"&&!l&&r(n[i-1].key)};return e.jsxs("div",{className:"flex justify-between my-4 2xl:my-6 2xl:gap-2 gap-1",children:[e.jsxs(nt,{className:_(s==="resultados"&&"w-full"),onClick:()=>g("previous"),disabled:x,variant:"secondary",children:[c.previousIcon,c.previousLabel]}),e.jsxs(nt,{className:_(s==="resultados"&&"w-full"),onClick:()=>g("next"),disabled:b,variant:"primary",children:[c.nextLabel,c.nextIcon]})]})},Nn=()=>{const t=h(i=>i.language),a=ss(),s=D(i=>i.currentStep),{setActivePage:n}=ae.getState(),r=ye(i=>i.isHidden);return a?e.jsxs(e.Fragment,{children:[e.jsx(ns,{}),e.jsxs("div",{className:_("flex flex-col",s==="resultados"?"2xl:px-80 px-60":"2xl:px-36 px-24 justify-between flex-1",r?"pt-6":"pt-0"),children:[e.jsx(bn,{}),e.jsx(yn,{})]})]}):e.jsx("div",{className:"flex-1 flex flex-col items-center justify-center bg-[var(--eem-bg-primary)]",children:e.jsxs("div",{className:"flex flex-col items-center justify-center text-center gap-1",children:[e.jsx("div",{className:"p-2 rounded-md border border-solid border-[var(--eem-border-primary)]",children:e.jsx(Fa,{className:"size-7"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl leading-snug font-semibold",children:t.messaging_nenhuma_campanha}),e.jsx("p",{className:"text-base",children:t.messaging_selecione_ou_crie})]}),e.jsx("button",{className:`py-1 px-2 bg-[var(--primaria)] font-semibold rounded-md text-base text-white 
            hover:brightness-95 hover:scale-105 active:scale-95 transition`,onClick:()=>n("campaigns"),children:t.messaging_ir_gerenciador})]})})};function rt(t){const a=h.getState().language;j.getState().setCurrentCampaignId(t);const s=j.getState().campaigns.find(r=>r.id===t);if(!s){z({type:"Error",message:a.campanha_nao_encontrada});return}const n=s.status===S.SENDING||s.status===S.PAUSED;D.getState().setCurrentStep(n?"envio":"contatos"),ae.getState().setActivePage("sendFastCampaign")}const Cn=({campaign:t})=>{const a=h(i=>i.language),s=j.getState().removeCampaign;function n(i){return{[S.SENDING]:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400",[S.SENT]:"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400",[S.FAILED]:"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400",[S.DRAFT]:"bg-gray-100 text-gray-800 dark:bg-gray-700/30 dark:text-gray-300",[S.PAUSED]:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900/20 dark:text-indigo-400"}[i]??"bg-gray-100 text-gray-800 dark:bg-gray-700/50 dark:text-gray-300"}const r=i=>{i.stopPropagation(),Pa({icon:e.jsx(Qe,{size:20,className:"text-red-600 dark:text-red-400"}),content:a.card_confirmar_excluir,confirmText:a.card_excluir,submit:()=>s(t.id)})};return e.jsxs("div",{role:"button",className:`rounded-xl p-4 flex flex-col justify-between cursor-pointer shadow-sm hover:shadow-md bg-[var(--contact-card-bg)] 
      border border-solid border-[var(--eem-border-primary)] hover:border-[var(--primaria)] transition-transform transform-gpu hover:-translate-y-0.5`,onClick:()=>rt(t.id),title:a.card_clique_abrir,children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsx("h3",{className:"font-semibold text-sm line-clamp-2",children:t.name}),e.jsx("div",{className:`badge text-[13px] ${n(t.status)}`,children:String(t.status)})]}),e.jsxs("p",{className:"text-xs text-[var(--light-text-color)]",children:[a.card_criada," ",t.createdAt.toLocaleString(void 0,{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"})]}),e.jsxs("p",{className:"text-xs text-[var(--light-text-color)]",children:[a.card_atualizada," ",t.updatedAt.toLocaleString(void 0,{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"})]}),e.jsxs("div",{className:"mt-3 flex items-center gap-4 text-sm text-[var(--light-text-color)]",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ya,{size:14}),e.jsx("span",{className:"text-sm",children:t.selectedContacts.length})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ja,{size:14}),e.jsx("span",{className:"text-sm",children:t.actions.length})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between gap-2 mt-4",children:[e.jsxs("button",{onClick:i=>{i.stopPropagation(),rt(t.id)},title:a.card_abrir_campanha,className:"flex items-center gap-2 px-3 py-1.5 text-sm font-medium rounded-md border border-solid border-[var(--light-text-color)]/20 hover:bg-[var(--light-text-color)]/10 transition-all transform-gpu hover:-translate-y-0.5",children:[e.jsx(Xa,{size:14}),e.jsx("span",{className:"hidden sm:inline",children:a.card_abrir})]}),e.jsx("button",{onClick:r,className:"flex items-center gap-2 p-2 text-base font-medium text-red-600 dark:text-red-400 border border-red-600/20 dark:border-red-400/20 rounded-md hover:bg-red-50 dark:hover:bg-red-900/10 transition-all transform-gpu hover:-translate-y-0.5",title:a.card_deletar_campanha,children:e.jsx(Qe,{size:16})})]})]})},wn=()=>{const t=h(m=>m.language),[a,s]=Y.useState(!1),n=j(m=>m.addCampaign),r=Y.useRef(null),i=m=>{m.preventDefault();const x=new FormData(m.currentTarget).get("campaignName");if(!(x!=null&&x.trim())){z({type:"Error",message:t.create_campaign_nome_vazio});return}const{newCampaign:b}=Ct({name:x.trim()});n(b),z({type:"Success",message:t.create_campaign_criada_sucesso}),r.current&&r.current.reset(),s(!1)},l=()=>{s(!1),r.current&&r.current.reset()},d=()=>_("btn btn-sm rounded-md bg-[var(--primaria)] text-white hover:bg-[var(--primaria)]/90","transition-all duration-150 hover:scale-[1.02] active:scale-95 active:opacity-80"),p=()=>_("h-8 px-2 rounded-md bg-[var(--primaria)] text-white hover:bg-[var(--primaria)]/90","transition-all duration-150 hover:scale-[1.02] active:scale-95 active:opacity-80","flex items-center justify-center");return e.jsx(e.Fragment,{children:a?e.jsxs("form",{className:"flex items-center gap-2",onSubmit:i,ref:r,children:[e.jsx("input",{type:"text",name:"campaignName",className:`px-3 h-8 rounded-md border border-solid border-[var(--eem-border-primary)]
            text-sm placeholder:text-sm focus:outline-none focus:ring-2 focus:ring-[var(--primaria)]/50`,placeholder:t.create_campaign_nome_placeholder,autoFocus:!0}),e.jsx("button",{type:"submit",title:t.create_campaign_criar_titulo,className:p(),children:e.jsx(_t,{size:16,className:"text-white"})}),e.jsx("button",{type:"button",title:t.create_campaign_cancelar_titulo,onClick:l,className:_(p(),"bg-gray-500 hover:bg-gray-600"),children:e.jsx(yt,{size:16,className:"text-white"})})]}):e.jsx("button",{type:"button",className:d(),onClick:()=>s(!0),children:t.create_campaign_nova_campanha})})},Sn=()=>{var n,r;const t=h(i=>i.language),a=vt(i=>i.label),s=j(i=>i.campaigns).slice().sort((i,l)=>(l.updatedAt??l.createdAt).getTime()-(i.updatedAt??i.createdAt).getTime());return e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between flex-shrink-0 border-b border-solid border-[var(--eem-border-primary)] p-6",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("h2",{className:"text-lg 2xl:text-xl font-bold leading-none",children:t.campaign_feature_titulo}),e.jsx("div",{className:"badge badge-xs 2xl:badge-sm bg-[var(--primaria)] text-white",children:s.length})]}),e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsx("div",{className:"-mt-3",children:((r=(n=a.videos_tutoriais)==null?void 0:n.envio_em_massa)==null?void 0:r.length)>0&&e.jsx(Ia,{funcao:()=>window.open(a.videos_tutoriais.envio_em_massa,"_blank")})}),e.jsx(wn,{})]})]}),e.jsx("div",{className:"flex-1 min-h-0 p-6",children:s.length===0?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("p",{className:"2xl:text-base text-sm text-gray-500",children:t.campaign_feature_nenhuma})}):e.jsx("div",{className:"h-full overflow-y-auto p-1",children:e.jsx("div",{className:"grid grid-cols-2 gap-2",children:s.map(i=>e.jsx(Cn,{campaign:i},i.id))})})})]})},kn=()=>e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Análises"}),e.jsx("p",{className:"text-lg text-gray-700",children:"Visualize as análises de suas campanhas e envios em massa aqui."})]}),An=()=>{const t=ae(n=>n.activePage),a=h(n=>n.language),s=()=>{switch(t){case"sendFastCampaign":return e.jsx(Nn,{});case"campaigns":return e.jsx(Sn,{});case"analytics":return e.jsx(kn,{});default:return e.jsx("div",{className:"px-36 pt-12",children:a.selecione_pagina_valida})}};return e.jsx("main",{className:"flex-1 flex flex-col overflow-auto",children:s()})};function Fn(){const{crm:t}=$e.getState(),{activeCrm:a}=Q.getState(),{activeCrmTab:s}=de.getState();if(a==="all"){const i=t.flatMap(l=>l.list??[]);return s==="all"?i.flatMap(l=>l.chats??[]):i.filter(l=>l.id===s).flatMap(l=>l.chats??[])}const n=t.find(i=>i.id===a),r=(n==null?void 0:n.list)??[];return s==="all"?r.flatMap(i=>i.chats??[]):r.filter(i=>i.id===s).flatMap(i=>i.chats??[])}function Pn(){const{userTabs:t}=Re.getState(),{activeUserTab:a}=me.getState();if(a==="all")return t.flatMap(n=>n.chats??[]);const s=t.find(n=>n.id===a);return(s==null?void 0:s.chats)??[]}async function In(t){const a=t.filter(s=>s!=null&&s.id!=null&&typeof s.id=="string"&&s.id.trim()!=="");return Promise.all(a.map(async s=>{const n=await fs(s);return{id:s.id,name:n,...s}}))}async function Tn(){const{activeSwitch:t}=ee.getState(),a=t==="crm"?Fn():Pn(),s=await In(a);return Array.from(new Map(s.map(r=>[r.id,r])).values())}let re=null;const zn=300*1e3;async function Dn(){const t=Date.now(),{activeGroup:a}=Ce.getState(),s=String(a);if(re&&re.group===s&&t-re.timestamp<zn)return re.data;let n=[];if(a==="all"){const r=await k.Group("getAllGroups");for(const i of r){const l=await k.Chat("List",{type:"getContatosGrupos",activeLid:!0,id:i.id});l&&l.length>0&&(n=[...n,...l])}n=Array.from(new Map(n.map(i=>[i.id,i])).values())}else{const r=await k.Chat("List",{type:"getContatosGrupos",activeLid:!0,id:a});r&&r.length>0&&(n=r)}return re={data:n,group:s,timestamp:t},n}let V=null;const Ln=300*1e3;async function En(){try{const t=Date.now();if(V&&t-V.timestamp<Ln)return V.data;const s=(await k.Group("getAllGroups")).filter(n=>{var r;return(n==null?void 0:n.id)&&((r=n==null?void 0:n.name)==null?void 0:r.trim())}).sort((n,r)=>n.name.toLowerCase().localeCompare(r.name.toLowerCase(),"pt"));return V={data:s,timestamp:t},s}catch(t){return console.error("Erro ao buscar grupos:",t),(V==null?void 0:V.data)||[]}}let q=null;const Mn=300*1e3;async function $n(){try{const t=Date.now();if(q&&t-q.timestamp<Mn)return q.data;const s=(await k.Chat("List")).filter(n=>n==null?void 0:n.id);return q={data:s,timestamp:t},s}catch(t){return console.error("Erro ao buscar contatos da caixa de entrada:",t),(q==null?void 0:q.data)||[]}}const ie={},Rn=300*1e3;async function On(){var t;try{const a=Date.now(),{activeLabel:s}=ce.getState(),n=String(s);if(ie[n]&&a-ie[n].timestamp<Rn)return ie[n].data;let r=[];if(s==="all"){const i=await k.Labels("getAllLabels");for(const l of i){const d=await k.Contact("List",{type:"withLabels",id:l.id});d&&d.length>0&&(r=[...r,...d])}r=Array.from(new Map(r.map(l=>[l.id,l])).values())}else{const i=await k.Contact("List",{type:"withLabels",id:s});i&&i.length>0&&(r=i)}return ie[n]={data:r,timestamp:a},r}catch(a){return console.error("Erro ao buscar contatos por label:",a),((t=ie[String(ce.getState().activeLabel)])==null?void 0:t.data)||[]}}let U=null;const Gn=300*1e3;async function Bn(){try{const t=Date.now();if(U&&t-U.timestamp<Gn)return U.data;const s=(await k.Contact("List","onlyMyContacts")).map(r=>({...r,_sortKey:(r.name??"").toLowerCase()}));s.sort((r,i)=>r._sortKey.localeCompare(i._sortKey,"pt"));const n=s.map(({_sortKey:r,...i})=>i);return U={data:n,timestamp:t},n}catch(t){return console.error("Erro ao buscar contatos salvos:",t),(U==null?void 0:U.data)||[]}}async function Vn(){const t=ke.getState().importedContacts;return!t||t.length===0?[]:t}const T=t=>(t??"").toString().trim().toLowerCase(),it=t=>{const a=T(t);return a?["m","masc","masculino","male","h","homem"].includes(a)?"male":["f","fem","feminino","female","mulher"].includes(a)?"female":a==="male"||a==="female"?a:null:null},H=t=>{if(!t)return null;const a=t.toString().trim();if(!a)return null;const s=a.split(/[\/-]/).map(l=>l.trim());if(s.length<3)return null;if(s[0].length===4){const[l,d,p]=s.map(m=>Number(m));return!isFinite(l)||!isFinite(d)||!isFinite(p)?null:new Date(l,d-1,p)}const[n,r,i]=s.map(l=>Number(l));return!isFinite(i)||!isFinite(r)||!isFinite(n)?null:new Date(i,r-1,n)},qn=(t,a)=>{const s=H(t),n=H(a);return!s||!n?!1:s.getDate()===n.getDate()&&s.getMonth()===n.getMonth()};function Un(){const t=O.getState().appliedFilters,a=Z.getState().selectedOption,s=(t.interestedProducts||[]).map(b=>T(b)).filter(Boolean),n=T(t.city),r=T(t.state),i=T(t.company),l=T(t.jobTitle),d=T(t.leadSource),p=t.gender?it(t.gender):null,m=t.entryDate?H(t.entryDate):null,c=t.exitDate?H(t.exitDate):null,x=t.birthDate??null;return b=>{const g=it(b.sexo);if(a==="birthdaysThisMonth"){const o=H(b.dataNascimento),u=new Date().getMonth();if((o?o.getMonth():-1)!==u)return!1}else{if(a==="genderMale"&&g!=="male")return!1;if(a==="genderFemale"&&g!=="female")return!1}if(p&&g!==p||n&&!T(b.cidade).includes(n)||r&&T(b.estado)!==r||i&&!T(b.empresa).includes(i)||l&&!T(b.cargo).includes(l)||d&&T(b.origemLead)!==d)return!1;if(s.length>0){const o=(b.produtos||[]).map(y=>T(y));if(!s.some(y=>o.includes(y)))return!1}if(x&&b.dataNascimento&&!qn(b.dataNascimento,x))return!1;if(m&&b.entrada){const o=H(b.entrada);if(o&&o<m)return!1}if(c&&b.saida){const o=H(b.saida);if(o&&o>c)return!1}return!0}}async function Hn(){const t=Ea.getState().perfil,a=Un(),s=t.filter(a);return await Promise.all(s.map(async r=>{const i=we(r.userID),l=await k.Contact("get",i);return{id:l.id||r.userID,name:l.name||r.userID}}))}const Wn={savedContacts:Bn,inbox:$n,labels:On,groups:En,groupContacts:Dn,crmOrTabs:Tn,contactProfile:Hn,importSpreadsheet:Vn},Kn=async()=>{const t=J.getState().activeFilter.id,a=Ne.getState().groupments.find(n=>n.id===t);return a?a.contacts||[]:[]};async function Yn(){const t=J.getState().activeFilter;if(t.type==="groupment")return Kn();const a=Wn[t.id];return a?await a():(console.warn(`Nenhuma função de busca definida para o filtro: ${t.id}`),[])}const Jn=1e3;async function Xn(t){const{setContacts:a,setLoading:s}=P.getState();if(t!=null&&t.aborted)throw new DOMException("Operation was aborted","AbortError");s(!0),a([]);try{const n=new Promise((d,p)=>{const m=setTimeout(d,Jn);t==null||t.addEventListener("abort",()=>{clearTimeout(m),p(new DOMException("Operation was aborted","AbortError"))})}),[r]=await Promise.all([Yn(),n]);if(t!=null&&t.aborted)throw new DOMException("Operation was aborted","AbortError");const i=await k.Conn("getMyUserId"),l=r.filter(d=>(d==null?void 0:d.id)!==void 0&&(d==null?void 0:d.id)!=null&&d.id.trim()&&!hs(d)&&d.id!=="0"&&d.id!=="status"&&d.id!==we(i)&&d.id!==i);if(!l.length){console.warn("Nenhum contato encontrado"),a([]);return}if(t!=null&&t.aborted)throw new DOMException("Operation was aborted","AbortError");a(l)}catch(n){n.name==="AbortError"?console.warn("Operação abortada pelo usuário"):console.error("Erro ao buscar contatos:",n),a([])}finally{s(!1)}}const Zn=t=>{const a=C.useRef(null);return C.useEffect(()=>{if(!t)return;const n=j.getState().campaigns.find(l=>l.id===t),r=(n==null?void 0:n.actions)??[];Ie.getState().setAcao(r),a.current=r;const i=Ie.subscribe(l=>{const d=l.acao??[];d!==a.current&&(a.current=d,j.getState().updateCampaign(t,{actions:d}))});return()=>{i()}},[t]),{clearAcaoOnly:()=>{Ie.getState().clearAcao(),a.current=null}}};function Qn(){const t=j(g=>g.currentCampaignId),{getNewController:a}=Qa(),{clearAcaoOnly:s}=Zn(t),n=J(g=>g.activeFilter),r=ce(g=>g.activeLabel),i=Ce(g=>g.activeGroup),l=ee(g=>g.activeSwitch),d=Q(g=>g.activeCrm),p=me(g=>g.activeUserTab),m=de(g=>g.activeCrmTab),c=O(g=>g.appliedFilters),x=Z(g=>g.selectedOption),b=ke(g=>g.importedContacts);return C.useEffect(()=>{const g=a();return Xn(g),()=>s()},[n,r,i,c,l,d,p,m,x,b]),e.jsxs("div",{className:"w-screen h-screen overflow-hidden bg-[var(--eem-bg-primary)] flex text-[var(--primary-strong)]","data-id":"eem-new",children:[e.jsx(as,{}),e.jsx(An,{})]})}function Mr(){return La(j,1e3)?e.jsx(Qn,{}):e.jsx("div",{className:"w-screen h-screen flex items-center justify-center bg-[var(--eem-bg-primary)]",children:e.jsx(es,{size:60,className:"text-[var(--primaria)] animate-spin"})})}export{Mr as default};
